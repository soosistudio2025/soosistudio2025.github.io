<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®¿æ´— Soosi | å¾Œå°ç®¡ç†ç³»çµ±</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Zen+Maru+Gothic:wght@500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        soosi: {
                            green: '#6A8D73',      // ä¸»è‰²ï¼šç¶ è‰²
                            wood: '#8E6E53',       // å‰¯è‰²ï¼šæœ¨é ­è‰²
                            dark: '#3F3F3F',       // æ–‡å­—ï¼šæ·±ç°
                            light: '#F9F7F2',      // èƒŒæ™¯ï¼šç±³ç™½
                            accent: '#E6C66D',     // é»ç¶´ï¼šé‡‘é»ƒ
                            red: '#D67D7D'         // è­¦ç¤ºï¼šæŸ”å’Œç´…
                        }
                    },
                    fontFamily: {
                        sans: ['"Zen Maru Gothic"', '"Noto Sans TC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        :root { --brand-bg: #F9F7F2; }
        body {
            font-family: 'Zen Maru Gothic', 'Noto Sans TC', sans-serif;
            background-color: var(--brand-bg);
            color: #3F3F3F;
            -webkit-font-smoothing: antialiased;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px 0 rgba(106, 141, 115, 0.1);
            border-radius: 2rem;
        }

        .cute-card {
            background: #FFFDF9;
            border: 2px solid #F0ECE6;
            border-radius: 1.5rem;
            box-shadow: 3px 3px 0px 0px rgba(142, 110, 83, 0.05);
            transition: all 0.2s;
        }
        .cute-card:hover { transform: translateY(-2px); box-shadow: 4px 4px 0px 0px rgba(106, 141, 115, 0.1); border-color: #6A8D73; }

        .status-badge { padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 900; }
        .status-pending { background: #FEF3C7; color: #D97706; }
        .status-confirmed { background: #D1FAE5; color: #059669; }
        .status-completed { background: #E5E7EB; color: #374151; }
        .status-cancelled { background: #FEE2E2; color: #DC2626; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- Supabase Config ---
        const supabaseUrl = 'https://uhrngtsashumvwgzaumm.supabase.co'; 
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVocm5ndHNhc2h1bXZ3Z3phdW1tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzMjMxNDUsImV4cCI6MjA4NDg5OTE0NX0.YDopNd9MHsjV9LFsHWyrxFIcWgQ_s0BMJlNSFqQfiTE';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        const ADMIN_EMAIL = "soosi.studio2025@gmail.com";
        const STAFF_EMAIL = "staff@soosi.com";

        const Icon = ({ name, size = 18, className = "" }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (window.lucide && iconRef.current) {
                    window.lucide.createIcons({ root: iconRef.current, attrs: { "stroke-width": 2.5, class: className } });
                }
            }, [name, className]);
            return <span ref={iconRef} key={name} className="inline-flex items-center justify-center"><i data-lucide={name} style={{ width: size, height: size }}></i></span>;
        };

        // --- ç™»å…¥ View ---
        const LoginView = ({ onLogin }) => {
            const [loginEmail, setLoginEmail] = useState('');
            const [password, setPassword] = useState('');
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const handleLogin = async (e) => {
                e.preventDefault();
                setLoading(true);
                setError('');
                const { data, error: authError } = await supabase.auth.signInWithPassword({ email: loginEmail, password });
                if (authError) {
                    setError('å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤');
                    setLoading(false);
                } else {
                    onLogin();
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-6 relative overflow-hidden">
                    <div className="absolute top-[-10%] left-[-10%] w-96 h-96 bg-soosi-green/20 rounded-full blur-3xl"></div>
                    <div className="absolute bottom-[-10%] right-[-10%] w-80 h-80 bg-soosi-wood/10 rounded-full blur-3xl"></div>
                    
                    <div className="glass-card w-full max-w-md p-10 text-center relative z-10 animate-in zoom-in duration-500">
                        <img src="logo.png" className="w-40 mx-auto mb-6 drop-shadow-sm" alt="Soosi Logo" />
                        
                        {!loginEmail ? (
                            <div className="space-y-4">
                                <h1 className="text-xl font-black text-soosi-dark mb-6">å®¿æ´— Soosi | ç®¡ç†å¾Œå°</h1>
                                <button onClick={() => setLoginEmail(ADMIN_EMAIL)} className="w-full bg-white border-2 border-soosi-green/20 hover:border-soosi-green hover:bg-soosi-green/5 text-soosi-dark py-4 rounded-2xl font-black flex items-center justify-center gap-3 transition-all active:scale-95">
                                    <div className="w-10 h-10 rounded-full bg-soosi-green text-white flex items-center justify-center"><Icon name="shield" /></div>
                                    ç®¡ç†å“¡ç™»å…¥
                                </button>
                                <button onClick={() => setLoginEmail(STAFF_EMAIL)} className="w-full bg-white border-2 border-soosi-wood/20 hover:border-soosi-wood hover:bg-soosi-wood/5 text-soosi-dark py-4 rounded-2xl font-black flex items-center justify-center gap-3 transition-all active:scale-95">
                                    <div className="w-10 h-10 rounded-full bg-soosi-wood text-white flex items-center justify-center"><Icon name="user" /></div>
                                    å“¡å·¥ç™»å…¥
                                </button>
                            </div>
                        ) : (
                            <form onSubmit={handleLogin} className="space-y-4 animate-in fade-in slide-in-from-bottom-2">
                                <div className="text-center mb-4">
                                    <span className={`px-4 py-1 rounded-full text-xs font-black text-white ${loginEmail === ADMIN_EMAIL ? 'bg-soosi-green' : 'bg-soosi-wood'}`}>
                                        {loginEmail === ADMIN_EMAIL ? 'ç®¡ç†å“¡' : 'ä¸€èˆ¬å“¡å·¥'}
                                    </span>
                                    <p className="text-sm font-bold text-soosi-dark/60 mt-2">{loginEmail}</p>
                                </div>
                                <input type="password" placeholder="è«‹è¼¸å…¥å¯†ç¢¼" value={password} onChange={e=>setPassword(e.target.value)} className="w-full text-center py-4 rounded-2xl border-2 border-soosi-green/20 focus:border-soosi-green outline-none font-black text-lg tracking-widest" autoFocus />
                                {error && <p className="text-soosi-red text-xs font-black">{error}</p>}
                                <button disabled={loading} className="w-full bg-soosi-dark text-white py-4 rounded-2xl font-black text-lg shadow-lg hover:opacity-90 transition-all flex items-center justify-center gap-2">
                                    {loading ? <Icon name="loader-2" className="animate-spin" /> : 'ç¢ºèªç™»å…¥'}
                                </button>
                                <button type="button" onClick={() => setLoginEmail('')} className="text-xs font-bold text-gray-400 hover:text-soosi-dark transition-colors">â† åˆ‡æ›èº«åˆ†</button>
                            </form>
                        )}
                    </div>
                </div>
            );
        };

        // --- è¨‚å–®è©³æƒ… Modal (å¤šå¯µç‰©è³‡è¨Š) ---
        const OrderModal = ({ order, onClose, onUpdateStatus }) => {
            if (!order) return null;
            const isBoarding = order.service_type === 'boarding' || order.service_type === 'daycare';

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-soosi-dark/60 backdrop-blur-sm animate-in fade-in">
                    <div className="w-full max-w-2xl bg-[#F9F7F2] rounded-[2.5rem] overflow-hidden shadow-2xl flex flex-col max-h-[90vh]">
                        {/* Header */}
                        <div className="bg-white px-8 py-5 flex justify-between items-center border-b border-gray-100">
                            <div>
                                <h3 className="font-black text-xl text-soosi-dark flex items-center gap-2">
                                    {isBoarding ? <Icon name="home" className="text-soosi-wood"/> : <Icon name="scissors" className="text-soosi-green"/>}
                                    {isBoarding ? (order.service_type === 'daycare' ? 'å®‰è¦ªè©³æƒ…' : 'ä½å®¿è©³æƒ…') : 'ç¾å®¹è©³æƒ…'}
                                </h3>
                                <p className="text-[10px] text-gray-400 font-bold tracking-widest uppercase">Booking ID: {order.id.slice(0,8)}</p>
                            </div>
                            <button onClick={onClose} className="p-2 hover:bg-gray-100 rounded-full transition-colors"><Icon name="x" size={24}/></button>
                        </div>

                        <div className="p-8 overflow-y-auto space-y-6">
                            {/* 1. ç‹€æ…‹èˆ‡æ“ä½œ */}
                            <div className="flex flex-wrap gap-3 items-center justify-between bg-white p-5 rounded-3xl border border-soosi-green/10 shadow-sm">
                                <span className={`status-badge px-4 py-1.5 text-xs ${
                                    order.status === 'pending' ? 'status-pending' :
                                    order.status === 'confirmed' ? 'status-confirmed' :
                                    order.status === 'cancelled' ? 'status-cancelled' : 'status-completed'
                                }`}>
                                    {order.status === 'pending' ? 'â³ å¾…ç¢ºèª' :
                                     order.status === 'confirmed' ? 'âœ… å·²ç¢ºèª' :
                                     order.status === 'cancelled' ? 'âŒ å·²å–æ¶ˆ' : 'ğŸ å·²å®Œæˆ'}
                                </span>
                                <div className="flex gap-2">
                                    <button onClick={()=>onUpdateStatus(order.id, 'confirmed')} className="px-4 py-2 bg-soosi-green text-white text-xs font-black rounded-xl hover:opacity-90 active:scale-95 transition-all">ç¢ºèª</button>
                                    <button onClick={()=>onUpdateStatus(order.id, 'completed')} className="px-4 py-2 bg-soosi-wood text-white text-xs font-black rounded-xl hover:opacity-90 active:scale-95 transition-all">å®Œæˆ</button>
                                    <button onClick={()=>onUpdateStatus(order.id, 'cancelled')} className="px-4 py-2 bg-red-100 text-soosi-red text-xs font-black rounded-xl hover:bg-red-200 active:scale-95 transition-all">å–æ¶ˆ</button>
                                </div>
                            </div>

                            {/* 2. é£¼ä¸»èˆ‡æ—¥æœŸ */}
                            <div className="grid md:grid-cols-2 gap-4">
                                <div className="cute-card p-5 space-y-2">
                                    <label className="text-[10px] font-black text-gray-400 tracking-wider">ğŸ‘¤ é£¼ä¸»è³‡è¨Š</label>
                                    <div className="font-black text-soosi-dark text-lg">{order.owner_name}</div>
                                    <div className="flex items-center gap-2 text-soosi-wood font-black">
                                        <Icon name="phone" size={14}/> {order.phone}
                                    </div>
                                    <div className="text-xs text-gray-400 font-bold">{order.email}</div>
                                </div>
                                <div className="cute-card p-5 space-y-2">
                                    <label className="text-[10px] font-black text-gray-400 tracking-wider">ğŸ“… é ç´„æ™‚é–“</label>
                                    {isBoarding ? (
                                        <div className="space-y-1">
                                            <div className="flex justify-between"><span className="text-gray-400 text-xs font-bold">å…¥ä½</span><span className="font-black text-soosi-dark">{order.check_in_date}</span></div>
                                            <div className="flex justify-between"><span className="text-gray-400 text-xs font-bold">é€€æˆ¿</span><span className="font-black text-soosi-dark">{order.check_out_date}</span></div>
                                            {order.service_type === 'daycare' && <div className="text-xs text-soosi-accent font-black mt-1">ğŸ•’ {order.booking_time} - {order.raw_data?.bookingTimeEnd || ''}</div>}
                                        </div>
                                    ) : (
                                        <div className="space-y-1">
                                            <div className="flex justify-between"><span className="text-gray-400 text-xs font-bold">æ—¥æœŸ</span><span className="font-black text-soosi-dark">{order.check_in_date || order.booking_date}</span></div>
                                            <div className="flex justify-between"><span className="text-gray-400 text-xs font-bold">æ™‚æ®µ</span><span className="font-black text-soosi-dark">{order.booking_time || 'æœªæŒ‡å®š'}</span></div>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* 3. å¯µç‰©åå–® (å¤šå¯µç‰©æ ¸å¿ƒ) */}
                            <div>
                                <h4 className="font-black text-soosi-dark mb-4 flex items-center gap-2 ml-1">
                                    <Icon name="paw-print" size={20} className="text-soosi-wood"/> 
                                    å…¥ä½æ¯›å­© ({order.booking_pets?.length || 0} éš»)
                                </h4>
                                <div className="space-y-4">
                                    {order.booking_pets?.map((pet, idx) => (
                                        <div key={idx} className="bg-white p-5 rounded-[1.5rem] border-2 border-soosi-green/10 shadow-sm space-y-4">
                                            <div className="flex justify-between items-start border-b border-dashed border-gray-100 pb-3">
                                                <div>
                                                    <div className="flex items-center gap-2">
                                                        <span className={`text-[10px] px-2 py-0.5 rounded-lg text-white font-black ${pet.pet_type==='cat'?'bg-soosi-green':'bg-soosi-wood'}`}>{pet.pet_type==='cat'?'è²“':'ç‹—'}</span>
                                                        <span className="font-black text-xl text-soosi-dark">{pet.pet_name}</span>
                                                    </div>
                                                    <div className="text-xs text-gray-400 font-bold mt-1">{pet.breed} Â· {pet.sex} Â· {pet.age}æ­² Â· {pet.weight}kg</div>
                                                </div>
                                            </div>

                                            {/* ç¾å®¹åŠ è³¼ */}
                                            {pet.add_grooming && (
                                                <div className="bg-soosi-green/5 p-3 rounded-2xl border border-soosi-green/10">
                                                    <div className="font-black text-soosi-green text-xs mb-2 flex justify-between">
                                                        <span className="flex items-center gap-1"><Icon name="sparkles" size={12}/> ç¾å®¹æœå‹™å…§å®¹</span>
                                                        <span>${pet.grooming_price}</span>
                                                    </div>
                                                    <div className="flex flex-wrap gap-1.5">
                                                        {pet.service_items?.map((item, i) => (
                                                            <span key={i} className="text-[10px] bg-white text-soosi-green px-2.5 py-1 rounded-full font-black border border-soosi-green/10 shadow-sm">{item}</span>
                                                        ))}
                                                    </div>
                                                </div>
                                            )}

                                            <div className="grid grid-cols-1 gap-2 text-xs">
                                                {pet.personality && <div className="text-gray-500"><span className="font-black text-soosi-dark mr-2">å€‹æ€§ï¼š</span>{pet.personality}</div>}
                                                {pet.medical_status === 'æœ‰' && <div className="text-soosi-red font-black"><Icon name="alert-circle" size={12} className="inline mr-1"/> æœ‰éå¾€ç—…å²ï¼š{pet.medical_history?.join(', ')}</div>}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* 4. è²»ç”¨ç¸½çµ */}
                            <div className="bg-soosi-wood text-white p-6 rounded-3xl shadow-lg shadow-soosi-wood/20 flex justify-between items-center">
                                <span className="font-black text-sm tracking-widest uppercase">Total Price</span>
                                <span className="font-black text-3xl">${order.total_price}</span>
                            </div>

                            {order.signature_url && (
                                <div className="text-center pt-4 border-t border-dashed border-gray-200">
                                    <label className="text-[10px] font-black text-gray-400 block mb-3 uppercase tracking-widest">Customer Signature</label>
                                    <img src={order.signature_url} className="h-24 mx-auto opacity-80 mix-blend-multiply" />
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // --- ä¸» Dashboard ---
        const Dashboard = () => {
            const [activeTab, setActiveTab] = useState('grooming'); // grooming | boarding
            const [orders, setOrders] = useState([]);
            const [loading, setLoading] = useState(true);
            const [selectedOrder, setSelectedOrder] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');

            const fetchOrders = async () => {
                setLoading(true);
                const filterTypes = activeTab === 'grooming' ? ['grooming'] : ['boarding', 'daycare'];
                const { data, error } = await supabase
                    .from('bookings')
                    .select('*, booking_pets(*)')
                    .in('service_type', filterTypes)
                    .order('created_at', { ascending: false });
                
                if (!error) setOrders(data || []);
                setLoading(false);
            };

            const updateStatus = async (id, newStatus) => {
                const { error } = await supabase.from('bookings').update({ status: newStatus }).eq('id', id);
                if (!error) {
                    setOrders(prev => prev.map(o => o.id === id ? { ...o, status: newStatus } : o));
                    if (selectedOrder?.id === id) setSelectedOrder(prev => ({ ...prev, status: newStatus }));
                }
            };

            useEffect(() => { fetchOrders(); }, [activeTab]);

            const filteredOrders = useMemo(() => {
                return orders.filter(o => 
                    o.owner_name?.includes(searchTerm) || 
                    o.phone?.includes(searchTerm) || 
                    o.booking_pets?.some(p => p.pet_name?.includes(searchTerm))
                );
            }, [orders, searchTerm]);

            return (
                <div className="min-h-screen pb-20">
                    <nav className="sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-soosi-green/10 px-6 py-4 flex justify-between items-center shadow-sm">
                        <div className="flex items-center gap-3">
                            <img src="logo.png" className="w-10 h-10 object-contain" />
                            <span className="font-black text-soosi-dark text-xl tracking-tight">Soosi Admin</span>
                        </div>
                        <button onClick={() => supabase.auth.signOut()} className="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-400 hover:bg-red-50 hover:text-soosi-red transition-all"><Icon name="log-out"/></button>
                    </nav>

                    <main className="max-w-4xl mx-auto p-6 space-y-6">
                        {/* æœå°‹ */}
                        <div className="relative group">
                            <Icon name="search" size={18} className="absolute left-4 top-1/2 -translate-y-1/2 text-gray-300 group-focus-within:text-soosi-green transition-colors" />
                            <input 
                                type="text" 
                                placeholder="æœå°‹ä¸»äººå§“åã€é›»è©±ã€æ¯›å­©åå­—..." 
                                value={searchTerm}
                                onChange={e => setSearchTerm(e.target.value)}
                                className="w-full pl-12 pr-4 py-4 rounded-2xl bg-white shadow-sm border-2 border-transparent focus:border-soosi-green outline-none font-bold text-sm transition-all"
                            />
                        </div>

                        {/* åˆ†é  Tab */}
                        <div className="flex bg-white p-1.5 rounded-[1.5rem] shadow-sm border border-gray-100">
                            <button onClick={() => setActiveTab('grooming')} className={`flex-1 py-3 rounded-2xl font-black text-sm flex items-center justify-center gap-2 transition-all ${activeTab === 'grooming' ? 'bg-soosi-green text-white shadow-md' : 'text-gray-400 hover:bg-gray-50'}`}>
                                <Icon name="scissors" size={16}/> æ´—æ¾¡ç¾å®¹
                            </button>
                            <button onClick={() => setActiveTab('boarding')} className={`flex-1 py-3 rounded-2xl font-black text-sm flex items-center justify-center gap-2 transition-all ${activeTab === 'boarding' ? 'bg-soosi-wood text-white shadow-md' : 'text-gray-400 hover:bg-gray-50'}`}>
                                <Icon name="home" size={16}/> ä½å®¿å®‰è¦ª
                            </button>
                        </div>

                        {/* è¨‚å–®åˆ—è¡¨ */}
                        {loading ? (
                            <div className="py-20 text-center text-gray-400 font-black animate-pulse">è¼‰å…¥è³‡æ–™ä¸­...</div>
                        ) : (
                            <div className="space-y-4">
                                {filteredOrders.map(order => (
                                    <div key={order.id} onClick={() => setSelectedOrder(order)} className="cute-card p-6 bg-white cursor-pointer relative overflow-hidden group">
                                        <div className={`absolute left-0 top-0 bottom-0 w-1.5 ${
                                            order.status === 'confirmed' ? 'bg-soosi-green' : 
                                            order.status === 'pending' ? 'bg-soosi-accent' : 
                                            order.status === 'cancelled' ? 'bg-soosi-red' : 'bg-gray-200'
                                        }`}></div>
                                        
                                        <div className="flex justify-between items-start mb-3">
                                            <div>
                                                <div className="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1">
                                                    {order.service_type === 'daycare' ? 'å®‰è¦ª' : (order.service_type === 'boarding' ? 'ä½å®¿' : 'ç¾å®¹')} 
                                                    Â· {new Date(order.created_at).toLocaleDateString()}
                                                </div>
                                                <div className="font-black text-xl text-soosi-dark flex items-center gap-2">
                                                    {order.owner_name}
                                                    {order.booking_pets?.length > 1 && <span className="text-[10px] bg-soosi-wood/10 text-soosi-wood px-2 py-0.5 rounded-full">{order.booking_pets.length}éš»æ¯›å­©</span>}
                                                </div>
                                            </div>
                                            <div className="text-right">
                                                <div className="font-black text-lg text-soosi-wood">${order.total_price}</div>
                                                <span className={`status-badge block mt-1 ${
                                                    order.status === 'pending' ? 'status-pending' :
                                                    order.status === 'confirmed' ? 'status-confirmed' :
                                                    order.status === 'cancelled' ? 'status-cancelled' : 'status-completed'
                                                }`}>
                                                    {order.status === 'pending' ? 'å¾…ç¢ºèª' :
                                                     order.status === 'confirmed' ? 'å·²ç¢ºèª' :
                                                     order.status === 'cancelled' ? 'å·²å–æ¶ˆ' : 'å·²å®Œæˆ'}
                                                </span>
                                            </div>
                                        </div>

                                        <div className="flex items-center gap-4 text-xs font-black text-gray-400">
                                            <div className="flex items-center gap-1.5 text-soosi-green">
                                                <Icon name="paw-print" size={14}/>
                                                {order.booking_pets?.slice(0, 2).map(p => p.pet_name).join(', ')}
                                                {order.booking_pets?.length > 2 && '...'}
                                            </div>
                                            <div className="flex items-center gap-1.5">
                                                <Icon name="calendar" size={14}/>
                                                {order.check_in_date || order.booking_date}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                                {filteredOrders.length === 0 && <div className="py-20 text-center text-gray-300 font-black">æš«ç„¡ç›¸é—œé ç´„è¨‚å–® ğŸƒ</div>}
                            </div>
                        )}
                    </main>

                    <OrderModal order={selectedOrder} onClose={() => setSelectedOrder(null)} onUpdateStatus={updateStatus} />
                </div>
            );
        };

        const App = () => {
            const [session, setSession] = useState(null);
            useEffect(() => {
                supabase.auth.getSession().then(({ data: { session } }) => setSession(session));
                supabase.auth.onAuthStateChange((_event, session) => setSession(session));
            }, []);
            return session ? <Dashboard /> : <LoginView onLogin={() => {}} />;
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
