<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">

<title>å®¿æ´—å¯µç‰© Soosi Pet | æ•¸ä½å¥‘ç´„ç³»çµ±</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="å®¿æ´— Soosi">
    <link rel="apple-touch-icon" href="nav.png">
    <link rel="icon" type="image/png" href="nav.png">
    <meta name="theme-color" content="#6A8D73"> 
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        soosi: {
                            green: '#6A8D73',      // ä¸»è‰²ï¼šç¶ è‰²
                            wood: '#8E6E53',       // å‰¯è‰²ï¼šæœ¨é ­è‰²
                            dark: '#3F3F3F',       // æ–‡å­—ï¼šæ·±ç°
                            light: '#F9F7F2',      // èƒŒæ™¯ï¼šç±³ç™½
                            accent: '#E6C66D',     // é»ç¶´ï¼šé‡‘é»ƒ
                            red: '#D67D7D'         // è­¦ç¤ºï¼šæŸ”å’Œç´…
                        }
                    },
                    fontFamily: {
                        sans: ['"Zen Maru Gothic"', '"Noto Sans TC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Zen+Maru+Gothic:wght@500;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest" defer></script>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>

<style>
        :root {
            --brand-primary: #6A8D73;
            --brand-secondary: #8E6E53;
            --brand-bg: #F9F7F2;
            --brand-text: #3F3F3F;
        }

        body {
            font-family: 'Zen Maru Gothic', 'Noto Sans TC', sans-serif;
            background-color: var(--brand-bg);
            color: var(--brand-text);
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
            -webkit-font-smoothing: antialiased;
            -webkit-tap-highlight-color: transparent;
        }

        /* é¦–é  Glass Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px 0 rgba(106, 141, 115, 0.1);
            border-radius: 2rem;
            transition: all 0.3s ease;
        }

        /* å…§é  Cute Card */
        .cute-card {
            background: #FFFDF9;
            border: 2px solid #F0ECE6;
            border-radius: 1.5rem;
            box-shadow: 3px 3px 0px 0px rgba(142, 110, 83, 0.1);
            position: relative;
            overflow: hidden;
        }

        .dashed-divider {
            border-bottom: 2px dashed #EBE9E4;
            margin: 1.5rem 0;
        }

        /* è¼¸å…¥æ¡† */
        .cute-input {
            background: #ffffff;
            border: 2px solid #EBE9E4;
            border-radius: 1rem;
            color: var(--brand-text);
            transition: all 0.3s;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
        }
        .cute-input:focus {
            border-color: var(--brand-primary);
            box-shadow: 0 0 0 4px rgba(106, 141, 115, 0.15);
            outline: none;
            transform: translateY(-1px);
        }
        .cute-input.input-error {
            border-color: #D67D7D;
            background-color: #FFF5F5;
        }

        /* æŒ‰éˆ•æ¨£å¼ Pill */
        .pill-button {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
        }
        .pill-button.active {
            background-color: var(--brand-primary);
            color: white;
            box-shadow: 0 4px 12px rgba(106, 141, 115, 0.3);
            border-color: var(--brand-primary);
        }
        .pill-button.inactive {
            background-color: white;
            color: #8E6E53;
            border-color: #EBE9E4;
        }
        .pill-button.inactive:hover {
            border-color: var(--brand-primary);
            color: var(--brand-primary);
        }
        /* éš±è—æ²è»¸ä½†ä¿ç•™æ»‘å‹•åŠŸèƒ½ */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* ç°½åæ¿å…¨è¢å¹• */
        .fullscreen-signature {
            position: fixed;
            inset: 0;
            z-index: 200;
            touch-action: none;
            background-color: #F9F7F2;
            display: flex;
            flex-direction: column;
        }

        .bg-blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.6;
        }

        .field-error {
            color: #D67D7D;
            font-size: 0.75rem;
            font-weight: 700;
            margin-top: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        /* LINE åœ–ç‰‡ä¿®æ­£ */
        .line-img-fix {
            object-fit: contain;
            display: block;
        }
    </style>
</head>

<body>
    <div id="root"></div>

<script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        
        const Icon = ({ name, size = 20, className = "" }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (typeof window.lucide !== 'undefined' && iconRef.current) {
                    window.lucide.createIcons({
                        root: iconRef.current,
                        attrs: { "stroke-width": 2.5, class: className },
                        name: name
                    });
                }
            }, [name, className]);
            return <span ref={iconRef} className="inline-flex items-center justify-center"><i data-lucide={name} style={{ width: size, height: size }}></i></span>;
        };

// Modal Component (å¼·åˆ¶é–±è®€åˆ°åº•)
        const TermsModal = ({ isOpen, onClose, title, children, onAgree }) => {
            const contentRef = useRef(null);
            const [canAgree, setCanAgree] = useState(false);

            useEffect(() => {
                if (isOpen) {
                    setCanAgree(false);
                    document.body.style.overflow = 'hidden';
                    // å…§å®¹å°‘çš„æ™‚å€™ç›´æ¥å…è¨±
                    setTimeout(() => {
                        if (contentRef.current && contentRef.current.scrollHeight <= contentRef.current.clientHeight + 50) setCanAgree(true);
                    }, 500);
                } else {
                    document.body.style.overflow = '';
                }
            }, [isOpen]);

// è‡ªå‹•æ›´æ–°èˆ‡åµæ¸¬è…³æœ¬
            const handleScroll = (e) => {
                const { scrollTop, scrollHeight, clientHeight } = e.target;
                // ç•¶è·é›¢åº•éƒ¨å°æ–¼ 50px æ™‚ï¼Œè‡ªå‹•æ›´æ–°æŒ‰éˆ•ç‚ºå¯é»æ“Šç‹€æ…‹
                if (scrollHeight - scrollTop - clientHeight < 50) {
                    setCanAgree(true);
                }
            };

            // è¦–çª—é–‹å•Ÿæ™‚çš„è‡ªå‹•æ ¡æº–é‚è¼¯
            useEffect(() => {
                if (isOpen) {
                    setCanAgree(false); // æ¯æ¬¡é–‹å•Ÿé‡æ–°è¨ˆç®—
                    document.body.style.overflow = 'hidden'; 
                    
                    // å»¶é²åµæ¸¬ï¼šè‹¥å…§å®¹æœ¬èº«å°±æ¯”è¦–çª—çŸ­ï¼Œè‡ªå‹•è§£é–
                    const timer = setTimeout(() => {
                        if (contentRef.current) {
                            const { scrollHeight, clientHeight } = contentRef.current;
                            if (scrollHeight <= clientHeight + 10) {
                                setCanAgree(true);
                            }
                        }
                    }, 400); 
                    return () => clearTimeout(timer);
                } else {
                    document.body.style.overflow = '';
                }
            }, [isOpen]);

            if (!isOpen) return null;

return (
                <div className="fixed inset-0 z-[150] bg-soosi-dark/40 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200">
                    <div className="w-full max-w-lg bg-white rounded-3xl shadow-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200">
                        <div className="px-6 py-4 bg-soosi-green text-white flex justify-between items-center shrink-0">
                            <h3 className="text-lg font-black tracking-wider flex items-center gap-2"><Icon name="file-text" size={18}/> {title}</h3>
                            <button onClick={onClose} className="p-1 hover:bg-white/20 rounded-full transition-colors"><Icon name="x" size={20} /></button>
                        </div>
                        <div ref={contentRef} onScroll={handleScroll} className="flex-1 overflow-y-auto p-6 text-sm leading-relaxed text-soosi-dark space-y-4 bg-[#F9F7F2]">
                            {children}
                            <div className="h-10"></div>
                        </div>
                        <div className="p-5 bg-white border-t-2 border-dashed border-gray-100 shrink-0">
                            {!canAgree && <div className="text-center text-xs font-bold text-soosi-red mb-3 animate-pulse">ğŸ‘‡ è«‹æ»‘å‹•å·è»¸è‡³æœ€åº•éƒ¨ä»¥å•Ÿç”¨æŒ‰éˆ•</div>}
                            <button onClick={() => { if(canAgree) { onAgree && onAgree(); onClose(); }}} disabled={!canAgree}
                                className={`w-full py-4 rounded-xl font-bold text-base flex items-center justify-center gap-2 transition-all ${canAgree ? 'bg-soosi-wood text-white shadow-lg hover:bg-[#7A5E47]' : 'bg-gray-100 text-gray-400 cursor-not-allowed'}`}>
                                <Icon name={canAgree ? "check-circle" : "lock"} size={20} />
                                {canAgree ? "æˆ‘å·²è©³é–±ä¸¦åŒæ„" : "è«‹é–±è®€å®Œç•¢"}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

// --- 1. å®šç¾©åƒ¹ç›®è¡¨è³‡æ–™ ---
// --- 1. å®šç¾©åƒ¹ç›®è¡¨è³‡æ–™ (å„ªåŒ–ç‰ˆï¼šé«”é‡åˆ†ç´šåˆ¶) ---
        const PRICE_DATA = {
            dogs: [
                { weight: '5kg ä»¥ä¸‹', typeA: 'å‰å¨ƒå¨ƒã€è‡˜è…¸ã€å¹¼çŠ¬', typeB: 'è²´è³“ã€æ¯”ç†Šã€é¦¬çˆ¾æ¿Ÿæ–¯', small: '500~600', full: '800~1500' },
                { weight: '5-10kg', weightClass: 'bg-green-50', typeA: 'å·´æˆˆã€æ³•é¬¥ã€æŸ´çŠ¬', typeB: 'æŸ¯åŸºã€å–œæ¨‚è’‚ã€ç‹ç‹¸', small: '600~900', full: '1200~1800' },
                { weight: '10-20kg', typeA: 'ç±³å…‹æ–¯ã€å¨ç‘ª', typeB: 'é‚Šå¢ƒã€å“ˆå£«å¥‡', small: '1000~1800', full: '2000~3500' },
                { weight: '20-30kg', weightClass: 'bg-green-50', typeA: 'é«˜å±±çŠ¬ã€ç¾…å¨ç´', typeB: 'å¤ä»£ç‰§ç¾ŠçŠ¬ã€é˜¿å¯Œæ±—', small: '1400~2000', full: '2800~4500' },
                { weight: '30-40kg', typeA: 'æœè³“ã€å¤§ä¸¹', typeB: 'é¬†ç…çŠ¬ã€å¤§ç™½ç†Š', small: '1800~2200', full: '3600~5500' },
                { weight: '40kg ä»¥ä¸Š', weightClass: 'bg-green-50', typeA: 'ç‹¼çŠ¬ã€å¤§å‹ç’çŠ¬', typeB: 'ç§‹ç”°ã€è–©æ‘©è€¶ã€è–ä¼¯ç´', small: '2000~2400', full: '4000~6500' },
            ],
            cats: [
                { type: 'å¹¼è²“', sub: '2-6å€‹æœˆ', small: '$600', full: '-', note: 'è¦–è¦ªäººç¨‹åº¦' },
                { type: 'çŸ­æ¯›è²“', sub: '2-6kg / >6kg', small: '$800 / $1000', full: '$1600 / $2000', note: '6kgä»¥ä¸Š +$100/kg' },
                { type: 'ä¸­é•·æ¯›', sub: '2-6kg / >6kg', small: '$1000 / $1200', full: '$2000 / $2400', note: '6kgä»¥ä¸Š +$100/kg' },
                { type: 'é•·æ¯›è²“', sub: '2-6kg / >6kg', small: '$1200 / $1400', full: '$2400 / $2800', note: '6kgä»¥ä¸Š +$100/kg' },
            ],
            extras: [
                { name: 'å±€éƒ¨ä¿®é£¾', desc: 'è²´è³“è‡‰/è…³', price: '$150 / $300' },
                { name: 'ç‰¹æ®Šé€ å‹', desc: 'è…³çƒ / è…³æŸ±', price: '$400èµ· / $600èµ·' },
                { name: 'å…¶ä»–è²»ç”¨', desc: 'æ‹†çµ / é™¤èš¤ / å…‡', price: 'ç¾å ´å ±åƒ¹' }
            ]
        };

// --- 2. å®šç¾©åƒ¹ç›®è¡¨é é¢ (å…¨è¢å¹•ç¨ç«‹é é¢ç‰ˆ) ---
        const PriceListPage = ({ onBack }) => {
            const [activeTab, setActiveTab] = useState('small'); // small, medium, large, cat
            
            // è³‡æ–™åˆ†çµ„é‚è¼¯ (ç¶­æŒä¸è®Š)
            const groupedDogs = useMemo(() => {
                return {
                    small: [PRICE_DATA.dogs[0]],
                    medium: [PRICE_DATA.dogs[1], PRICE_DATA.dogs[2]],
                    large: [PRICE_DATA.dogs[3], PRICE_DATA.dogs[4], PRICE_DATA.dogs[5]]
                };
            }, []);

            // å…§éƒ¨å°çµ„ä»¶ï¼šåƒ¹æ ¼è¡Œ
            const PriceRow = ({ label, value, highlight = false }) => (
                <div className="flex justify-between items-center py-3 border-b border-dashed border-gray-100 last:border-0">
                    <span className="text-sm font-bold text-soosi-dark">{label}</span>
                    <span className={`text-sm font-black font-mono ${highlight ? 'text-soosi-green text-base' : 'text-soosi-wood'}`}>{value}</span>
                </div>
            );

            // å…§éƒ¨å°çµ„ä»¶ï¼šTab æŒ‰éˆ•
            const TabBtn = ({ id, label, icon }) => (
                <button 
                    onClick={() => { setActiveTab(id); window.scrollTo({top:0, behavior:'smooth'}); }}
                    className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all border shadow-sm flex items-center justify-center gap-2 ${
                        activeTab === id 
                        ? 'bg-soosi-wood text-white border-soosi-wood ring-2 ring-soosi-wood/20' 
                        : 'bg-white text-gray-400 border-gray-100'
                    }`}
                >
                    <span className="text-lg">{icon}</span>
                    <span>{label}</span>
                </button>
            );

            return (
                <div className="min-h-screen bg-[#F9F7F2] pb-10 animate-in slide-in-from-right duration-300">
                    
                    {/* ç¨ç«‹ Headerï¼šåªæœ‰è¿”å›æŒ‰éˆ• */}
                    <div className="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100 shadow-sm px-4 py-3 flex items-center gap-4">
                        <button onClick={onBack} className="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-gray-200 transition-colors">
                            <Icon name="arrow-left" size={20}/>
                        </button>
                        <div>
                            <h3 className="text-lg font-black text-soosi-wood">æœå‹™åƒ¹ç›®è¡¨</h3>
                            <p className="text-[10px] text-gray-400 font-bold">é»æ“Šå·¦å´æŒ‰éˆ•è¿”å›å¡«å¯«</p>
                        </div>
                    </div>

                    {/* å…§å®¹å€ */}
                    <div className="p-4 space-y-4 max-w-2xl mx-auto">
                        
                        {/* é ‚éƒ¨åˆ‡æ›å€ (æ”¹ç‚ºå…©æ’è¨­è¨ˆï¼Œæ‰‹æ©Ÿæ›´å¥½æŒ‰) */}
                        <div className="grid grid-cols-2 gap-2">
                            <TabBtn id="small" label="å°å‹çŠ¬" icon="ğŸ¾" />
                            <TabBtn id="medium" label="ä¸­å‹çŠ¬" icon="ğŸ•" />
                            <TabBtn id="large" label="å¤§å‹çŠ¬" icon="ğŸ¦®" />
                            <TabBtn id="cat" label="è²“å’ªèˆ‡å…¶ä»–" icon="ğŸ±" />
                        </div>

                        {/* ç‹—ç‹—å¡ç‰‡æ¸²æŸ“ */}
                        {['small', 'medium', 'large'].includes(activeTab) && groupedDogs[activeTab].map((item, idx) => (
                            <div key={idx} className="bg-white rounded-2xl p-6 shadow-sm border border-soosi-wood/5 animate-in fade-in zoom-in-95 duration-300">
                                <div className="flex items-center justify-between mb-4 border-b border-gray-50 pb-3">
                                    <div className="bg-soosi-green/10 text-soosi-green font-black px-3 py-1 rounded-lg text-sm">{item.weight}</div>
                                </div>
                                
                                {/* å¸¸è¦‹çŠ¬ç¨® */}
                                <div className="mb-5 space-y-2">
                                    <div className="flex items-start gap-2 text-xs text-gray-500">
                                        <span className="bg-gray-100 px-1.5 py-0.5 rounded text-gray-500 font-bold shrink-0">çŸ­æ¯›</span>
                                        <span className="leading-relaxed">{item.typeA}</span>
                                    </div>
                                    <div className="flex items-start gap-2 text-xs text-gray-500">
                                        <span className="bg-gray-100 px-1.5 py-0.5 rounded text-gray-500 font-bold shrink-0">é•·æ¯›</span>
                                        <span className="leading-relaxed">{item.typeB}</span>
                                    </div>
                                </div>

                                {/* åƒ¹æ ¼ */}
                                <div className="bg-gray-50 rounded-xl p-4 space-y-1">
                                    <PriceRow label="å°ç¾å®¹ (æ´—æ¾¡+ä¿®å‰ª)" value={`$${item.small}`} />
                                    <PriceRow label="å¤§ç¾å®¹ (å…¨èº«é€ å‹)" value={`$${item.full}`} highlight={true} />
                                </div>
                            </div>
                        ))}

{/* è²“å’ªç¾å®¹å€å¡Š (åƒ…åœ¨è²“å’ªåˆ†é é¡¯ç¤º) */}
                        {activeTab === 'cat' && (
                            <div className="bg-white rounded-2xl p-6 shadow-sm border border-soosi-wood/5 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300">
                                <Icon name="cat" className="absolute -right-6 -bottom-6 text-soosi-wood/5 w-32 h-32" />
                                <h4 className="font-black text-soosi-wood mb-4 text-lg">ğŸ± è²“å’ªç¾å®¹</h4>
                                <div className="space-y-6">
                                    {PRICE_DATA.cats.map((cat, i) => (
                                        <div key={i} className="relative z-10">
                                            <div className="flex justify-between items-baseline mb-2">
                                                <span className="font-bold text-soosi-dark text-base">{cat.type}</span>
                                                <span className="text-xs bg-gray-100 px-2 py-0.5 rounded-full text-gray-500">{cat.sub}</span>
                                            </div>
                                            <div className="grid grid-cols-2 gap-3">
                                                <div className="bg-orange-50/50 rounded-xl p-3 text-center border border-orange-100/50">
                                                    <div className="text-xs text-orange-400 mb-1">æ´—æ¾¡</div>
                                                    <div className="font-mono font-bold text-soosi-dark">{cat.small}</div>
                                                </div>
                                                <div className="bg-soosi-green/5 rounded-xl p-3 text-center border border-soosi-green/10">
                                                    <div className="text-xs text-soosi-green mb-1">å¤§ç¾å®¹</div>
                                                    <div className="font-mono font-black text-soosi-wood">{cat.full}</div>
                                                </div>
                                            </div>
                                            {cat.note && <div className="text-[10px] text-gray-400 mt-1 text-right">* {cat.note}</div>}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* å…¶ä»–è²»ç”¨å€å¡Š (æ‰€æœ‰åˆ†é é ç±¤åº•éƒ¨çš†é¡¯ç¤º) */}
                        <div className="bg-white rounded-2xl p-6 shadow-sm border border-soosi-wood/5">
                            <h4 className="font-black text-soosi-wood mb-4 text-lg">âœ¨ å…¶ä»–è²»ç”¨</h4>
                            {PRICE_DATA.extras.map((ex, i) => (
                                <div key={i} className="flex justify-between items-center py-4 border-b border-dashed border-gray-100 last:border-0">
                                    <div>
                                        <div className="font-bold text-soosi-dark text-base">{ex.name}</div>
                                        <div className="text-xs text-gray-400 mt-0.5">{ex.desc}</div>
                                    </div>
                                    <div className="text-soosi-wood font-mono font-bold text-lg">{ex.price}</div>
                                </div>
                            ))}
                        </div>

                        {/* åº•éƒ¨æé†’ */}
                        <div className="bg-yellow-50 text-yellow-800 p-4 rounded-xl text-xs border border-yellow-100 leading-relaxed flex gap-2">
                            <Icon name="info" size={16} className="shrink-0 mt-0.5"/>
                            <div>
                                <span className="font-bold block mb-1">è¨ˆåƒ¹èªªæ˜ï¼š</span>
                                å¯¦éš›æ”¶è²»ä»éœ€ä¾ç…§ç¾å ´æ¸¬é‡ä¹‹ã€Œé«”é‡ã€æ¯›é‡ã€å»¢æ¯›ç‹€æ³ã€ç‚ºæº–ã€‚è‹¥æœ‰åš´é‡çš„æ‰“çµæˆ–è·³èš¤å£è¨ï¼Œéœ€ç¾å ´å¦åŠ æ”¶è™•ç†è²»ã€‚
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        // --- ä½å®¿åƒ¹ç›®è¡¨ Modal (åœ–ç‰‡ç‰ˆ) ---
        const BoardingPriceModal = ({ isOpen, onClose }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-[160] bg-soosi-dark/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200" onClick={onClose}>
                    <div className="w-full max-w-lg bg-white rounded-3xl shadow-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95" onClick={e => e.stopPropagation()}>
                        {/* Header */}
                        <div className="px-6 py-4 bg-soosi-green text-white flex justify-between items-center shrink-0">
                            <h3 className="text-lg font-black tracking-wider flex items-center gap-2"><Icon name="image" size={18}/> ä½å®¿åƒ¹ç›®è¡¨</h3>
                            <button onClick={onClose} className="p-1 hover:bg-white/20 rounded-full transition-colors"><Icon name="x" size={20} /></button>
                        </div>
                        
                        {/* åœ–ç‰‡å…§å®¹å€ */}
                        <div className="overflow-y-auto p-4 bg-[#F9F7F2] space-y-4">
                            {/* ç‹—ç‹—åƒ¹ç›®è¡¨ */}
                            <div className="bg-white p-2 rounded-xl shadow-sm border border-gray-100">
                                <div className="text-center text-xs font-bold text-gray-400 mb-2">- ç‹—ç‹—ä½å®¿ -</div>
                                {/* æª”åå°æ‡‰ dogprice.jpg (è«‹ç¢ºèªå‰¯æª”åæ˜¯ jpg ä¸æ˜¯ jgp) */}
                                <img src="./dogprice.jpg" alt="ç‹—ç‹—ä½å®¿åƒ¹ç›®è¡¨" className="w-full h-auto rounded-lg" onError={(e) => e.target.style.display = 'none'} />
                            </div>
                            
                            {/* è²“å’ªåƒ¹ç›®è¡¨ */}
                            <div className="bg-white p-2 rounded-xl shadow-sm border border-gray-100">
                                <div className="text-center text-xs font-bold text-gray-400 mb-2">- è²“å’ªä½å®¿ -</div>
                                {/* æª”åå°æ‡‰ catprice.jpg */}
                                <img src="./catprice.jpg" alt="è²“å’ªä½å®¿åƒ¹ç›®è¡¨" className="w-full h-auto rounded-lg" onError={(e) => e.target.style.display = 'none'} />
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        const App = () => {
    // 2. é€šç”¨è¼¸å…¥è™•ç† (æ–‡å­—ã€æ—¥æœŸã€å–®é¸)
    const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
    };

    // 3. è¤‡é¸æ¡†è™•ç† (é‡å°ç± å…§è¨“ç·´)
    const handleCheckboxChange = (e, field) => {
        const { value, checked } = e.target;
        setFormData(prev => {
            const currentValues = prev[field] || [];
            if (checked) {
                return { ...prev, [field]: [...currentValues, value] };
            } else {
                return { ...prev, [field]: currentValues.filter(v => v !== value) };
            }
        });
    };
            
            const [view, setView] = useState('entry'); 
            const [isBoarding, setIsBoarding] = useState(false);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [errors, setErrors] = useState({});
            const [lineConfirmed, setLineConfirmed] = useState(false);
            
            // Signature State
            const [showFullSig, setShowFullSig] = useState(false);
            const [realtimeSig, setRealtimeSig] = useState(null);
            const sigCanvasRef = useRef(null);
            const padInstance = useRef(null);

            // Terms State
const [activeModal, setActiveModal] = useState(null);
            const [termsRead, setTermsRead] = useState({ 
                grooming: false, 
                boarding: false, 
                highRiskGrooming: false, 
                highRiskBoarding: false 
            });

            const [formData, setFormData] = useState({
                email: '', owner_name: '', phone: '', owner_id: '', address: '',
                emergency_name: '', emergency_phone: '',
                pet_name: '', breed: '', weight: '', 
                age: '', age_months: '', is_under_one: false,
                sex: '', fix: '', 
                social_aggression: '', social_play: '', // æ‹†åˆ†ç¤¾äº¤æ¬„ä½
                grooming_temperament: '',
                chip_status: '', chip_id: '', preferred_clinic: '',
                medical_status: '', medical_history: [], medical_history_other: '',
                service_type: '', service_type_other: '', legal_agree: false
            });

            // Routing
            useEffect(() => {
                const handleHashChange = () => {
                    const hash = window.location.hash;
                    if (hash === '#grooming') {
                        setView('form'); setIsBoarding(false); window.scrollTo(0, 0);
                    } else if (hash === '#boarding') {
                        setView('form'); setIsBoarding(true); window.scrollTo(0, 0);
                    } else {
                        setView('entry');
                        if(window.location.hash) history.replaceState(null, null, ' ');
                    }
                };
                handleHashChange(); 
                window.addEventListener('hashchange', handleHashChange);
                return () => window.removeEventListener('hashchange', handleHashChange);
            }, []);

            const goHome = () => { window.location.hash = ''; };
            const goGrooming = () => { window.location.hash = 'grooming'; };
            const goBoarding = () => { window.location.hash = 'boarding'; };

            // Logic Helpers
            const actualAge = useMemo(() => {
                if (formData.is_under_one && formData.age_months) return parseFloat(formData.age_months) / 12;
                return parseFloat(formData.age) || 0;
            }, [formData.age, formData.age_months, formData.is_under_one]);

            // é«˜é¢¨éšªåˆ¤å®šï¼šå¹´é½¡ OR æœ‰ç—…å²
            const isHighRisk = useMemo(() => {
                const ageRisk = actualAge >= 8 || (actualAge > 0 && actualAge < 0.42);
                const medicalRisk = formData.medical_status === 'æœ‰';
                return ageRisk || medicalRisk;
            }, [actualAge, formData.medical_status]);

const riskType = useMemo(() => {
                if (formData.medical_status === 'æœ‰') return 'medical';
                if (actualAge >= 8) return 'senior';
                if (actualAge > 0 && actualAge < 0.42) return 'puppy';
                return null;
            }, [actualAge, formData.medical_status]);

            // --- æ–°å¢ï¼šä½å®¿å¤©æ•¸è¨ˆç®— ---
            const stayDuration = useMemo(() => {
                if (!formData.checkInDate || !formData.checkOutDate) return null;
                const start = new Date(formData.checkInDate);
                const end = new Date(formData.checkOutDate);
                const diffTime = end - start;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return diffDays > 0 ? diffDays : null;
            }, [formData.checkInDate, formData.checkOutDate]);

            // --- æ–°å¢ï¼šç¾å®¹æ™‚æ®µç”¢ç”Ÿ (æ¯åŠå°æ™‚) ---
            const timeSlots = useMemo(() => {
                const slots = [];
                const startHour = 10; // 10:00 é–‹å§‹
                const endHour = 20;   // 20:00 çµæŸ
                for (let i = startHour; i < endHour; i++) {
                    slots.push(`${i}:00`);
                    slots.push(`${i}:30`);
                }
                slots.push(`${endHour}:00`);
                return slots;
            }, []);
            
// æ¢æ¬¾å®Œæˆæª¢æŸ¥ (é‚è¼¯æ›´æ–°ï¼šä½å®¿éœ€åŒæ™‚å®Œæˆ4é …ï¼Œç¾å®¹éœ€å®Œæˆ2é …)
            const allTermsRead = useMemo(() => {
                // 1. åŸºç¤ç¾å®¹æ¢æ¬¾ (æ‰€æœ‰äººå¿…è®€)
                if (!termsRead.grooming) return false;
                
                // 2. ä½å®¿æ¢æ¬¾ (ä½å®¿å®¢å¿…è®€)
                if (isBoarding && !termsRead.boarding) return false;
                
                // 3. é«˜é¢¨éšªåˆ¤å®š
                if (isHighRisk) {
                    // é«˜é¢¨éšªç¾å®¹ (é«˜é¢¨éšªå¿…è®€)
                    if (!termsRead.highRiskGrooming) return false;
                    
                    // é«˜é¢¨éšªä½å®¿ (ä½å®¿ + é«˜é¢¨éšªå¿…è®€)
                    if (isBoarding && !termsRead.highRiskBoarding) return false;
                }
                
                return true;
            }, [isBoarding, isHighRisk, termsRead]);

            const handleChange = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
                if (errors[field]) setErrors(prev => ({ ...prev, [field]: null }));
            };

            const toggleArray = (field, value) => {
                setFormData(prev => {
                    const arr = prev[field] || [];
                    const newArr = arr.includes(value) ? arr.filter(i => i !== value) : [...arr, value];
                    return { ...prev, [field]: newArr };
                });
            };

            // ç°½åæ¿åˆå§‹åŒ– (ä¿®å¾© Canvas å¤§å°å•é¡Œ)
            useEffect(() => {
                if (showFullSig && sigCanvasRef.current) {
                    // ä½¿ç”¨ setTimeout ç¢ºä¿ DOM æ¸²æŸ“å®Œæˆ
                    setTimeout(() => {
                        const canvas = sigCanvasRef.current;
                        if(canvas) {
                             const ratio = Math.max(window.devicePixelRatio || 1, 1);
                             canvas.width = canvas.offsetWidth * ratio;
                             canvas.height = canvas.offsetHeight * ratio;
                             const ctx = canvas.getContext("2d");
                             ctx.scale(ratio, ratio);
                             // ç¢ºä¿ç­†è·¡æ¸…æ¥š
                             padInstance.current = new window.SignaturePad(canvas, { 
                                 minWidth: 2, 
                                 maxWidth: 4, 
                                 penColor: "#3F3F3F",
                                 backgroundColor: 'rgba(0,0,0,0)'
                             });
                        }
                    }, 100);
                }
            }, [showFullSig]);

            const handleSubmit = () => {
                const newErrors = {};
                const required = ['email', 'owner_name', 'phone', 'address', 'emergency_name', 'emergency_phone', 'pet_name', 'breed', 'weight', 'sex', 'fix', 'grooming_temperament', 'chip_status', 'medical_status', 'social_aggression', 'social_play'];
                
                required.forEach(f => { if(!formData[f]) newErrors[f] = 'æ­¤æ¬„ä½ç‚ºå¿…å¡«'; });
                if(formData.chip_status === 'æœ‰æ™¶ç‰‡' && !formData.chip_id) newErrors.chip_status = 'è«‹è¼¸å…¥æ™¶ç‰‡è™Ÿç¢¼';
                
if(!lineConfirmed) newErrors.line = 'è«‹ç¢ºèªå·²åŠ å…¥ LINE';
if(!allTermsRead) newErrors.signature = 'è«‹å…ˆå®Œæˆä¸Šæ–¹æ‰€æœ‰å¥‘ç´„æ¢æ¬¾é–±è®€';
if(!realtimeSig) newErrors.signature = 'è«‹å®Œæˆç°½å';
                
                if (Object.keys(newErrors).length > 0) {
                    setErrors(newErrors);
                    const firstError = Object.keys(newErrors)[0];
                    const el = document.getElementById(firstError);
                    if(el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    else alert("è«‹æª¢æŸ¥å¿…å¡«æ¬„ä½");
                    return;
                }
                setIsSubmitting(true);
                // æ¨¡æ“¬é€å‡º
                setTimeout(() => { alert("æäº¤æˆåŠŸï¼"); setIsSubmitting(false); window.location.reload(); }, 1500);
            };

            const PillBtn = ({ active, onClick, children, className = "" }) => (
                <button type="button" onClick={onClick} 
                    className={`pill-button flex-1 py-3 px-4 rounded-xl font-bold text-sm flex items-center justify-center gap-2 ${active ? 'active' : 'inactive'} ${className}`}>
                    {children}
                </button>
            );

            const InputGroup = ({ label, error, id, children, required = false }) => (
                <div className="space-y-1.5" id={id}>
                    <label className="text-sm font-bold text-soosi-wood ml-1 flex items-center gap-1">
                        {required && <span className="text-soosi-red text-xs">â—</span>}
                        {label}
                    </label>
                    {children}
                    {error && <div className="field-error"><Icon name="alert-circle" size={12}/>{error}</div>}
                </div>
            );

            // --- 1. é¦–é  View ---
            if (view === 'entry') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-6 relative overflow-hidden">
                        <div className="bg-blob w-96 h-96 bg-soosi-green/20 top-[-10%] left-[-10%]"></div>
                        <div className="bg-blob w-80 h-80 bg-soosi-wood/10 bottom-[-10%] right-[-10%]"></div>

                        <div className="w-full max-w-lg mx-auto relative z-10 flex flex-col items-center">
                            <div className="mb-10 relative group cursor-default">
                                <div className="absolute inset-0 bg-white/40 rounded-full blur-2xl transform scale-110"></div>
                                <img src="logo.png" alt="å®¿æ´— Soosi Pet" className="w-56 md:w-64 h-auto relative z-10 drop-shadow-sm transform group-hover:scale-105 transition-transform duration-500" />
                                <div className="absolute -right-4 -top-2 bg-soosi-accent text-soosi-dark text-xs font-black px-3 py-1 rounded-full rotate-12 shadow-sm">ç‰¹å¯µæ¥­å­—ç¬¬ S1140030è™Ÿ</div>
                            </div>
                            <div className="text-center mb-10 space-y-2">
                                <h1 className="text-2xl font-black text-soosi-dark tracking-wide">å®¿æ´—å¯µç‰© <span className="text-soosi-green">Soosi Pet</span></h1>
                                <p className="text-soosi-wood font-medium text-sm tracking-widest">ç¾å®¹ | æ—…é¤¨ | å®‰è¦ª | é¸å“</p>
                            </div>
                            
                            <div className="grid grid-cols-1 w-full gap-5">
                                <button onClick={goGrooming} 
                                    className="glass-card p-6 flex items-center gap-5 group hover:bg-white/90 active:scale-[0.98] border-l-8 border-soosi-green transition-all relative overflow-hidden">
                                    <div className="w-16 h-16 rounded-2xl bg-soosi-green/10 flex items-center justify-center text-soosi-green group-hover:bg-soosi-green group-hover:text-white transition-colors shadow-sm z-10">
                                        <Icon name="scissors" size={32} />
                                    </div>
                                    <div className="text-left flex-1 z-10">
                                        <h3 className="text-xl font-black text-soosi-dark mb-1">æ´—æ¾¡ç¾å®¹</h3>
                                        <p className="text-xs text-gray-500 font-medium">Grooming Service</p>
                                    </div>
                                    <div className="text-soosi-green z-10"><Icon name="arrow-right" /></div>
                                </button>

                                <button onClick={goBoarding} 
                                    className="glass-card p-6 flex items-center gap-5 group hover:bg-white/90 active:scale-[0.98] border-l-8 border-soosi-wood transition-all relative overflow-hidden">
                                    <div className="w-16 h-16 rounded-2xl bg-soosi-wood/10 flex items-center justify-center text-soosi-wood group-hover:bg-soosi-wood group-hover:text-white transition-colors shadow-sm z-10">
                                        <Icon name="home" size={32} />
                                    </div>
                                    <div className="text-left flex-1 z-10">
                                        <h3 className="text-xl font-black text-soosi-dark mb-1">å®‰è¦ªä½å®¿</h3>
                                        <p className="text-xs text-gray-500 font-medium">Pet Boarding</p>
                                    </div>
                                    <div className="text-soosi-wood z-10"><Icon name="arrow-right" /></div>
                                </button>
                            </div>

                            <footer className="mt-12 text-center space-y-5">
                                <div className="flex items-center justify-center gap-8 text-soosi-wood/70">
                                    <a href="https://www.instagram.com/soosi.studio/" target="_blank" className="hover:text-soosi-green hover:scale-110 transition-all flex flex-col items-center gap-1">
                                        <Icon name="instagram" size={24}/>
                                        <span className="text-[10px] font-bold">Instagram</span>
                                    </a>
                                    <a href="https://www.facebook.com/soosistudio/?rdid=4JTN13dweC8vLijB" target="_blank" className="hover:text-soosi-green hover:scale-110 transition-all flex flex-col items-center gap-1">
                                        <Icon name="facebook" size={24}/>
                                        <span className="text-[10px] font-bold">Facebook</span>
                                    </a>
                                    <a href="http://lin.ee/nfGjHryU" target="_blank" className="hover:text-soosi-green hover:scale-110 transition-all flex flex-col items-center gap-1">
                                        <img src="line.png" className="w-6 h-6 grayscale opacity-70 hover:grayscale-0 hover:opacity-100 transition-all line-img-fix"/>
                                        <span className="text-[10px] font-bold">LINE</span>
                                    </a>
                                </div>
                                <div>
                                    <a href="https://maps.app.goo.gl/Y2sQnyWPW5Dysezg6" target="_blank" 
                                       className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/50 border border-white/60 hover:bg-white/80 transition-all text-soosi-wood text-xs font-bold shadow-sm backdrop-blur-sm">
                                        <Icon name="map-pin" size={14} className="text-soosi-red" />
                                        å°ä¸­å¸‚æ¸…æ°´å€æ–°èˆˆè·¯142-1è™Ÿ
                                    </a>
                                </div>
                                <p className="text-[10px] text-gray-400 font-medium tracking-wider">
                                    Â© 2026 Soosi Pet. All Rights Reserved.
                                </p>
                            </footer>
                        </div>
                    </div>
                );
            }
// --- æ–°å¢ï¼šåƒ¹ç›®è¡¨ View (æ”¾åœ¨ entry ä¹‹å¾Œï¼Œè¡¨å–®ä¹‹å‰) ---
            if (view === 'prices') {
                return <PriceListPage onBack={() => setView('form')} />;
            }

            // --- 2. è¡¨å–® View ---
            return (
                <div className="min-h-screen pb-32">
                    {/* Nav: Logo æ”¾å¤§ */}
                    <nav className="fixed top-0 w-full z-40 bg-white/90 backdrop-blur-xl border-b border-soosi-green/10 shadow-sm transition-all">
                        <div className="px-6 py-3 flex justify-between items-center max-w-3xl mx-auto">
                            <div className="flex items-center gap-3 cursor-pointer" onClick={goHome}>
                                <img src="nav.png" alt="Logo" className="w-12 h-12 object-contain" />
                                <div className="font-black text-lg text-soosi-dark tracking-wide">å®¿æ´— Soosi</div>
                            </div>
<div className="flex items-center gap-2">
                                {/* ç¾å®¹æ¨¡å¼ï¼šé¡¯ç¤ºæ–‡å­—ç‰ˆåƒ¹ç›®è¡¨ */}

{!isBoarding && (
    <button onClick={() => setView('prices')} className="text-xs font-bold text-white bg-soosi-wood px-3 py-1.5 rounded-full shadow-sm hover:bg-soosi-wood/90 transition-all flex items-center gap-1">
        <Icon name="dollar-sign" size={14}/> åƒ¹ç›®è¡¨
    </button>
)}

                                {/* ä½å®¿æ¨¡å¼ï¼šé¡¯ç¤ºåœ–ç‰‡ç‰ˆåƒ¹ç›®è¡¨ */}
                                {isBoarding && (
                                    <button onClick={() => setActiveModal('boardingPrice')} className="text-xs font-bold text-white bg-soosi-green px-3 py-1.5 rounded-full shadow-sm hover:bg-soosi-green/90 transition-all flex items-center gap-1">
                                        <Icon name="image" size={14}/> åƒ¹ç›®è¡¨
                                    </button>
                                )}

                                <button onClick={goHome} className="text-xs font-bold text-soosi-wood hover:bg-soosi-wood/10 px-3 py-1.5 rounded-full transition-colors flex items-center gap-1">
                                    <Icon name="arrow-left" size={14}/> è¿”å›é¦–é 
                                </button>
                            </div>
                        </div>
                    </nav>

                    <main className="pt-28 px-4 max-w-3xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                        <div className="text-center space-y-2 pb-2">
                            <div className={`inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider ${isBoarding ? 'bg-soosi-wood/10 text-soosi-wood' : 'bg-soosi-green/10 text-soosi-green'}`}>
                                {isBoarding ? "Hotel Service" : "Grooming Service"}
                            </div>
                            <h2 className="text-3xl font-black text-soosi-dark tracking-tight">
                                {isBoarding ? "ä½å®¿æœå‹™è³‡æ–™å¡«å¯«" : "ç¾å®¹æœå‹™è³‡æ–™å¡«å¯«"}
                            </h2>
                        </div>

                        {/* LINE Section (é‡è¨­è¨ˆ) */}
                        <div className="cute-card p-6 space-y-4" id="line">
                            <div className="text-center space-y-1">
                                <div className="inline-block bg-[#06C755] text-white px-3 py-0.5 rounded-full text-[10px] font-black shadow-sm mb-1">STEP 1</div>
                                <h3 className="text-lg font-black text-soosi-wood flex items-center justify-center gap-2">
                                    åŠ å…¥å®˜æ–¹ LINE
                                </h3>
                                <p className="text-xs text-gray-400 font-bold">ID: @610ijdjr</p>
                            </div>
                            
                            <div className="bg-white border-2 border-dashed border-gray-200 rounded-2xl p-4 flex flex-col md:flex-row items-center gap-4">
<div className="flex-1 w-full">
                                    <a href="http://lin.ee/nfGjHryU" target="_blank" className="w-full bg-[#06C755]/5 border border-[#06C755]/20 hover:bg-[#06C755]/10 text-[#06C755] rounded-xl p-3 flex items-center justify-center gap-2 transition-all active:scale-95">
                                        <img src="line.png" className="w-6 h-6 line-img-fix" /> 
                                        <span className="font-bold">1. é»æ“ŠåŠ å…¥å¥½å‹</span>
                                    </a>
                                
                                </div>
                                <div className="hidden md:block text-gray-300 font-black"><Icon name="arrow-right" size={24}/></div>
                                <div className="flex-1 w-full bg-red-50 text-soosi-red border border-red-100 rounded-xl p-3 flex items-center justify-center gap-2">
                                    <Icon name="message-circle" size={18}/>
                                    <span className="font-bold">2. å‹™å¿…å‚³é€è²¼åœ–</span>
                                </div>
                            </div>
                            
                            <label className={`w-full flex items-center justify-center gap-3 p-4 rounded-xl border-2 transition-all cursor-pointer select-none ${lineConfirmed ? 'bg-[#06C755]/10 border-[#06C755] text-[#06C755]' : 'bg-white border-gray-200 text-gray-400 hover:border-[#06C755]/50'}`}>
                                <div className={`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${lineConfirmed ? 'bg-[#06C755] border-[#06C755]' : 'border-gray-300'}`}>
                                    {lineConfirmed && <Icon name="check" size={12} className="text-white"/>}
                                </div>
                                <input type="checkbox" className="hidden" checked={lineConfirmed} onChange={()=>setLineConfirmed(!lineConfirmed)}/>
                                <span className="font-bold text-sm">æˆ‘å·²å®ŒæˆåŠ å…¥å¥½å‹ä¸¦å‚³é€è²¼åœ–</span>
                            </label>
                            {errors.line && <div className="field-error justify-center"><Icon name="alert-circle" size={12}/>{errors.line}</div>}
                        </div>

                        {/* Owner Info */}
                        <section className="cute-card p-8 space-y-6">
                            <div className="flex items-center gap-3 border-b-2 border-dashed border-soosi-wood/10 pb-4">
                                <span className="text-2xl">ğŸ‘¤</span>
                                <h3 className="text-lg font-black text-soosi-dark">é£¼ä¸»åŸºæœ¬è³‡æ–™</h3>
                            </div>
                            <div className="grid md:grid-cols-2 gap-5">
                                <InputGroup label="é›»å­éƒµä»¶" required error={errors.email} id="email">
                                    <input type="email" value={formData.email} onChange={e=>handleChange('email', e.target.value)} className={`w-full cute-input px-4 py-3 ${errors.email ? 'input-error' : ''}`} placeholder="å¯„é€å¥‘ç´„å‰¯æœ¬ç”¨" />
                                </InputGroup>
                                <InputGroup label="ä¸»äººå§“å" required error={errors.owner_name} id="owner_name">
                                    <input type="text" value={formData.owner_name} onChange={e=>handleChange('owner_name', e.target.value)} className={`w-full cute-input px-4 py-3 ${errors.owner_name ? 'input-error' : ''}`} placeholder="è«‹è¼¸å…¥å…¨å" />
                                </InputGroup>
                                <InputGroup label="é€£çµ¡é›»è©±" required error={errors.phone} id="phone">
                                    <div className="flex gap-2">
                                        <input type="tel" value={formData.phone} onChange={e=>handleChange('phone', e.target.value)} className={`w-full cute-input px-4 py-3 flex-1 ${errors.phone ? 'input-error' : ''}`} placeholder="0912345678" />
                                        <button className="px-4 bg-soosi-wood text-white rounded-xl font-bold text-sm shadow-md hover:bg-[#7a5e47] flex items-center gap-1 whitespace-nowrap"><Icon name="search" size={14}/> èˆŠå®¢</button>
                                    </div>
                                </InputGroup>
                                <InputGroup label="èº«åˆ†è­‰å­—è™Ÿ " required error={errors.id}  id="owner_id">
                                    <input type="text" value={formData.owner_id} onChange={e=>handleChange('owner_id', e.target.value)} className="w-full cute-input px-4 py-3" placeholder="ä¾‹å¦‚: A123456789" />
                                </InputGroup>
                                <div className="md:col-span-2">
                                    <InputGroup label="é€šè¨Šåœ°å€" required error={errors.address} id="address">
                                        <input type="text" value={formData.address} onChange={e=>handleChange('address', e.target.value)} className={`w-full cute-input px-4 py-3 ${errors.address ? 'input-error' : ''}`} placeholder="è«‹è¼¸å…¥å®Œæ•´åœ°å€" />
                                    </InputGroup>
                                </div>
                                <div className="md:col-span-2 dashed-divider"></div>
                                <InputGroup label="ç·Šæ€¥è¯çµ¡äººå§“å" required error={errors.emergency_name} id="emergency_name">
                                    <input type="text" value={formData.emergency_name} onChange={e=>handleChange('emergency_name', e.target.value)} className={`w-full cute-input px-4 py-3 border-red-100 bg-red-50/20 ${errors.emergency_name ? 'input-error' : ''}`} />
                                </InputGroup>
                                <InputGroup label="ç·Šæ€¥é€£çµ¡é›»è©±" required error={errors.emergency_phone} id="emergency_phone">
                                    <input type="tel" value={formData.emergency_phone} onChange={e=>handleChange('emergency_phone', e.target.value)} className={`w-full cute-input px-4 py-3 border-red-100 bg-red-50/20 ${errors.emergency_phone ? 'input-error' : ''}`} />
                                </InputGroup>
</div>
                        </section>

                        {/* æ–°å¢ï¼šé ç´„æ™‚é–“å€å¡Š (æ”¾åœ¨å¯µç‰©è³‡æ–™ä¸Šæ–¹) */}
                        <section className="cute-card p-8 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-100">
                            <div className="flex items-center gap-3 border-b-2 border-dashed border-soosi-wood/10 pb-4">
                                <span className="text-2xl">ğŸ“…</span>
                                <h3 className="text-lg font-black text-soosi-dark">
                                    {isBoarding ? "ä½å®¿æ™‚é–“é ç´„" : "ç¾å®¹é ç´„è³‡è¨Š"}
                                </h3>
                            </div>

                            {isBoarding ? (
                                /* ä½å®¿æ¨¡å¼é¡¯ç¤º */
                                <div className="space-y-4">
                                    <div className="grid md:grid-cols-2 gap-5">
                                        <InputGroup label="å…¥ä½æ—¥æœŸ" required error={errors.checkInDate} id="checkInDate">
                                            <input type="date" name="checkInDate" value={formData.checkInDate || ''} onChange={handleInputChange} className={`w-full cute-input px-4 py-3 ${errors.checkInDate ? 'input-error' : ''}`} />
                                        </InputGroup>
                                        <InputGroup label="é€€æˆ¿æ—¥æœŸ" required error={errors.checkOutDate} id="checkOutDate">
                                            <input type="date" name="checkOutDate" value={formData.checkOutDate || ''} onChange={handleInputChange} className={`w-full cute-input px-4 py-3 ${errors.checkOutDate ? 'input-error' : ''}`} />
                                        </InputGroup>
                                    </div>
                                    {/* è‡ªå‹•è¨ˆç®—æ™šæ•¸ Badge */}
                                    {stayDuration && (
                                        <div className="flex justify-center pt-2 animate-in zoom-in duration-300">
                                            <div className="bg-gradient-to-r from-soosi-wood to-[#7A5E47] text-white px-6 py-2.5 rounded-full font-bold shadow-lg flex items-center gap-2 transform hover:scale-105 transition-transform">
                                                <Icon name="moon" size={18} className="text-soosi-accent" />
                                                <span>å…±å…¥ä½ <span className="text-soosi-accent text-lg">{stayDuration}</span> æ™š</span>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            ) : (
                                /* ç¾å®¹æ¨¡å¼é¡¯ç¤º */
                                <div className="grid md:grid-cols-2 gap-5">
                                    <InputGroup label="é ç´„æ—¥æœŸ" required error={errors.bookingDate} id="bookingDate">
                                        <input type="date" name="bookingDate" value={formData.bookingDate || ''} onChange={handleInputChange} className={`w-full cute-input px-4 py-3 ${errors.bookingDate ? 'input-error' : ''}`} />
                                    </InputGroup>
                                    <InputGroup label="é ç´„æ™‚æ®µ" required error={errors.bookingTime} id="bookingTime">
                                        <select name="bookingTime" value={formData.bookingTime || ''} onChange={handleInputChange} className={`w-full cute-input px-4 py-3 appearance-none ${errors.bookingTime ? 'input-error' : ''}`}>
                                            <option value="">è«‹é¸æ“‡æ™‚æ®µ</option>
                                            {timeSlots.map(time => (
                                                <option key={time} value={time}>{time}</option>
                                            ))}
                                        </select>
                                    </InputGroup>
                                </div>
                            )}
                        </section>

                        {/* Pet Info */}
                        <section className="cute-card p-8 space-y-6">
                            <div className="flex items-center gap-3 border-b-2 border-dashed border-soosi-wood/10 pb-4">
                                <span className="text-2xl">ğŸ¾</span>
                                <h3 className="text-lg font-black text-soosi-dark">å¯µç‰©è©³ç´°è³‡æ–™</h3>
                            </div>
                            <div className="grid md:grid-cols-2 gap-5">
                                <InputGroup label="å¯µç‰©åå­—" required error={errors.pet_name} id="pet_name">
                                    <input type="text" value={formData.pet_name} onChange={e=>handleChange('pet_name', e.target.value)} className={`w-full cute-input px-4 py-3 ${errors.pet_name ? 'input-error' : ''}`} />
                                </InputGroup>
                                <InputGroup label="å“ç¨®" required error={errors.breed} id="breed">
                                    <input type="text" value={formData.breed} onChange={e=>handleChange('breed', e.target.value)} className={`w-full cute-input px-4 py-3 ${errors.breed ? 'input-error' : ''}`} />
                                </InputGroup>
                                <InputGroup label="é«”é‡ (kg)" required error={errors.weight} id="weight">
                                    <input type="number" step="0.1" value={formData.weight} onChange={e=>handleChange('weight', e.target.value)} className={`w-full cute-input px-4 py-3 ${errors.weight ? 'input-error' : ''}`} />
                                </InputGroup>
                                
                                {/* ä¿®æ”¹å¹´é½¡é‚è¼¯ï¼šåˆ‡æ›æ™‚æ¸…ç©ºå¦ä¸€é‚Šçš„æ•¸å€¼ */}
                                <div className="space-y-2">
                                    <label className="text-sm font-bold text-soosi-wood ml-1 flex items-center gap-1"><span className="text-soosi-red text-xs">â—</span> å¹´é½¡</label>
                                    <div className="flex gap-2">
                                        <PillBtn active={!formData.is_under_one} onClick={()=>setFormData(p=>({...p, is_under_one:false, age_months:''}))}>ä¸€æ­²ä»¥ä¸Š</PillBtn>
                                        <PillBtn active={formData.is_under_one} onClick={()=>setFormData(p=>({...p, is_under_one:true, age:''}))}>ä¸€æ­²ä»¥ä¸‹</PillBtn>
                                    </div>
                                    {formData.is_under_one ? (
                                        <select value={formData.age_months} onChange={e=>handleChange('age_months', e.target.value)} className="w-full cute-input px-4 py-3">
                                            <option value="">è«‹é¸æ“‡æœˆé½¡</option>
                                            {[1,2,3,4,5,6,7,8,9,10,11].map(m=><option key={m} value={m}>{m} å€‹æœˆ</option>)}
                                        </select>
                                    ) : (
                                        <input type="number" placeholder="è«‹è¼¸å…¥å¹´é½¡ (æ­²)" value={formData.age} onChange={e=>handleChange('age', e.target.value)} className="w-full cute-input px-4 py-3" />
                                    )}
                                </div>

                                <div className="space-y-2">
                                    <label className="text-sm font-bold text-soosi-wood ml-1 flex items-center gap-1"><span className="text-soosi-red text-xs">â—</span> æ€§åˆ¥</label>
                                    <div className="flex gap-2">
                                        <PillBtn active={formData.sex === 'å…¬'} onClick={()=>handleChange('sex', 'å…¬')}>å…¬</PillBtn>
                                        <PillBtn active={formData.sex === 'æ¯'} onClick={()=>handleChange('sex', 'æ¯')}>æ¯</PillBtn>
                                    </div>
                                    {errors.sex && <div className="field-error"><Icon name="alert-circle" size={12}/>{errors.sex}</div>}
                                </div>

                                <div className="space-y-2">
                                    <label className="text-sm font-bold text-soosi-wood ml-1 flex items-center gap-1"><span className="text-soosi-red text-xs">â—</span> çµç´®</label>
                                    <div className="flex gap-2">
                                        <PillBtn active={formData.fix === 'æ˜¯'} onClick={()=>handleChange('fix', 'æ˜¯')}>æ˜¯</PillBtn>
                                        <PillBtn active={formData.fix === 'å¦'} onClick={()=>handleChange('fix', 'å¦')}>å¦</PillBtn>
                                    </div>
                                    {errors.fix && <div className="field-error"><Icon name="alert-circle" size={12}/>{errors.fix}</div>}
                                </div>

                                {/* ç¤¾äº¤ç‹€æ³ï¼šæ”¹ç‚ºäºŒé¸ä¸€çš„å…©çµ„é¡Œç›® */}
                                <div className="md:col-span-2 space-y-4" id="social_aggression">
                                    <label className="text-sm font-bold text-soosi-wood ml-1 flex items-center gap-1"><span className="text-soosi-red text-xs">â—</span> æ”»æ“Šæ€§</label>
                                    <div className="flex gap-3">
                                        <PillBtn active={formData.social_aggression === 'æœ‰æ”»æ“Šæ€§'} onClick={()=>handleChange('social_aggression', 'æœ‰æ”»æ“Šæ€§')}>æœ‰æ”»æ“Šæ€§</PillBtn>
                                        <PillBtn active={formData.social_aggression === 'ç„¡æ”»æ“Šæ€§'} onClick={()=>handleChange('social_aggression', 'ç„¡æ”»æ“Šæ€§')}>ç„¡æ”»æ“Šæ€§</PillBtn>
                                    </div>
                                    {errors.social_aggression && <div className="field-error"><Icon name="alert-circle" size={12}/>{errors.social_aggression}</div>}
                                </div>

                                <div className="md:col-span-2 space-y-4" id="social_play">
                                    <label className="text-sm font-bold text-soosi-wood ml-1 flex items-center gap-1"><span className="text-soosi-red text-xs">â—</span> èˆ‡ç‹—ç›¸è™•</label>
                                    <div className="flex gap-3">
                                        <PillBtn active={formData.social_play === 'å¯èˆ‡ç‹—ç©'} onClick={()=>handleChange('social_play', 'å¯èˆ‡ç‹—ç©')}>å¯èˆ‡ç‹—æœ‹å‹ç©</PillBtn>
                                        <PillBtn active={formData.social_play === 'ä¸å¯èˆ‡ç‹—ç©'} onClick={()=>handleChange('social_play', 'ä¸å¯èˆ‡ç‹—ç©')}>ä¸èƒ½èˆ‡ç‹—æœ‹å‹ç©</PillBtn>
                                    </div>
                                    {errors.social_play && <div className="field-error"><Icon name="alert-circle" size={12}/>{errors.social_play}</div>}
                                </div>


                                <div className="md:col-span-2 space-y-2" id="grooming_temperament">
                                    <label className="text-sm font-bold text-soosi-wood ml-1 flex items-center gap-1"><span className="text-soosi-red text-xs">â—</span> ç¾å®¹æ€§æƒ…èˆ‡æ”»æ“Šæ€§è©•ä¼°</label>
                                    <div className="space-y-2">
                                        {[
                                            {v: 'å¤©ä½¿å¯¶å¯¶', l: 'ğŸ˜‡ å¤©ä½¿å¯¶å¯¶ï¼šå€‹æ€§æº«å’Œï¼Œç„¡ä»»ä½•æ”»æ“Šç´€éŒ„ï¼Œä¹Ÿä¸æ€•ç”Ÿã€‚'},
                                            {v: 'æœ‰é»ç·Šå¼µ', l: 'ğŸ˜“ æœ‰é»ç·Šå¼µï¼šè†½å°æ€•ç”Ÿï¼Œå¯èƒ½æœƒä½å¼æˆ–é–ƒèº²ï¼Œä½†æœªæ›¾å’¬äººã€‚'},
                                            {v: 'æ°åŒ—åŒ—/è­·ä¸»', l: <span className="text-red-500">ğŸ¤¬ æ°åŒ—åŒ—/è­·ä¸»ï¼šç‰¹å®šéƒ¨ä½æ•æ„Ÿæˆ–æ›¾æœ‰æ”»æ“Šç´€éŒ„ (è«‹å‹™å¿…å‘ŠçŸ¥)ã€‚</span>}
                                        ].map(item => (
                                            <button key={item.v} type="button" onClick={()=>handleChange('grooming_temperament', item.v)}
                                                className={`w-full pill-button px-4 py-3 rounded-xl text-left font-bold text-sm ${formData.grooming_temperament === item.v ? 'active' : 'inactive'}`}>
                                                {item.l}
                                            </button>
                                        ))}
                                    </div>
                                    {errors.grooming_temperament && <div className="field-error"><Icon name="alert-circle" size={12}/>{errors.grooming_temperament}</div>}
                                </div>

                                <div className="md:col-span-2 space-y-2">
                                    <label className="text-sm font-bold text-soosi-wood ml-1 flex items-center gap-1"><span className="text-soosi-red text-xs">â—</span> æ™¶ç‰‡ç‹€æ…‹</label>
                                    <div className="flex gap-2 flex-wrap">
                                        {['æœ‰æ™¶ç‰‡','æœ‰æ™¶ç‰‡(è™Ÿç¢¼ä¸è©³)','ç„¡æ™¶ç‰‡'].map(s => (
                                            <PillBtn key={s} active={formData.chip_status===s} onClick={()=>handleChange('chip_status', s)}>{s}</PillBtn>
                                        ))}
                                    </div>
                                    {formData.chip_status === 'æœ‰æ™¶ç‰‡' && (
                                        <input type="text" value={formData.chip_id} onChange={e=>handleChange('chip_id', e.target.value)} className="w-full cute-input px-4 py-3 mt-2" placeholder="è«‹è¼¸å…¥æ™¶ç‰‡è™Ÿç¢¼" />
                                    )}
                                    {errors.chip_status && <div className="field-error"><Icon name="alert-circle" size={12}/>{errors.chip_status}</div>}
                                </div>

                                <div className="md:col-span-2">
                                    <InputGroup label="æŒ‡å®šå°±é†«è¨ºç™‚æ©Ÿæ§‹ (è‹¥æœªå¡«å¯«ï¼Œå‰‡é€å¾€ç‰¹ç´„é†«é™¢)" id="preferred_clinic">
                                        <input type="text" value={formData.preferred_clinic} onChange={e=>handleChange('preferred_clinic', e.target.value)} className="w-full cute-input px-4 py-3" />
                                        <div className="mt-2 p-3 rounded-xl bg-soosi-green/5 border border-soosi-green/20 flex items-center gap-3">
                                            <div className="bg-soosi-green p-2 rounded-full text-white"><Icon name="hospital" size={16}/></div>
                                            <div>
                                                <div className="text-xs font-bold text-gray-400">ç‰¹ç´„é†«é™¢</div>
                                                <div className="font-bold text-soosi-wood text-sm">å¾…ç¢ºèª</div>
                                            </div>
                                        </div>
                                    </InputGroup>
                                </div>

{/* éå¾€ç—…å²å€å¡Šï¼šé è¨­ç´…åº•ä¸¦å°‡æé†’ç·Šè²¼æ¨™é¡Œ */}
                                <div className="md:col-span-2 p-5 rounded-2xl border bg-red-50 border-red-100 transition-all" id="medical_status">
                                    <div className="flex items-center gap-2 mb-4">
                                        <label className="text-sm font-bold text-soosi-wood ml-1">
                                            éå¾€ç—…å²
                                        </label>
                                        <div className="flex items-center gap-1 text-soosi-red text-[10px] font-black bg-white px-2 py-0.5 rounded-full shadow-sm animate-pulse border border-red-100 shrink-0">
                                            <Icon name="alert-circle" size={14}/> è«‹å‹™å¿…å¦‚å¯¦å‘ŠçŸ¥
                                        </div>
                                    </div>

                                    <div className="flex gap-3 mb-4">
                                        <PillBtn active={formData.medical_status === 'æœ‰'} onClick={() => handleChange('medical_status', 'æœ‰')} className={formData.medical_status === 'æœ‰' ? 'bg-soosi-red border-soosi-red' : 'bg-white'}>æœ‰</PillBtn>
                                        <PillBtn active={formData.medical_status === 'ç„¡'} onClick={() => handleChange('medical_status', 'ç„¡')} className={formData.medical_status === 'ç„¡' ? '' : 'bg-white'}>ç„¡</PillBtn>
                                    </div>
                                    
                                    {errors.medical_status && <div className="field-error"><Icon name="alert-circle" size={12}/>{errors.medical_status}</div>}

                                    {formData.medical_status === 'æœ‰' && (
                                        <div className="space-y-3 mt-4 pt-4 border-t border-red-200/50 animate-in fade-in">
                                            <div className="flex flex-wrap gap-2">
                                                {['å¿ƒè‡Ÿç—…','æ°£å–˜','æ°£ç®¡å¡Œé™·','ç™½å…§éšœ','ç™²ç™‡','å¿ƒçµ²èŸ²','çš®è†šç—…','å…¶ä»–'].map(v => (
                                                    <button key={v} type="button" onClick={() => toggleArray('medical_history', v)}
                                                        className={`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${formData.medical_history.includes(v) ? 'bg-soosi-wood text-white border-soosi-wood' : 'bg-white text-gray-500 border-gray-200'}`}>
                                                        {v}
                                                    </button>
                                                ))}
                                            </div>
                                            {formData.medical_history.includes('å…¶ä»–') && <textarea className="w-full cute-input px-4 py-2 mt-2" placeholder="è«‹èªªæ˜å…¶ä»–ç—…å²..." value={formData.medical_history_other} onChange={e => handleChange('medical_history_other', e.target.value)} />}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </section>
{/* ä½å®¿å°ˆç”¨è¡¨å–® (å…¶ä»–ç´°ç¯€) */}
                    {isBoarding && (
                        <div className="space-y-8 animate-in fade-in slide-in-from-bottom-8 duration-700">
                            
                            {/* å€å¡Š 2: åŸºæœ¬èª¿æŸ¥ (Yes/No) */}
                            <div className="bg-white p-6 rounded-3xl shadow-sm border border-soosi-green/10 space-y-6">                                <h3 className="font-black text-lg text-soosi-green flex items-center gap-2 border-b border-soosi-green/10 pb-2">
                                    <Icon name="clipboard" size={20}/> åŸºæœ¬èª¿æŸ¥
                                </h3>

                                {[
                                    { id: 'isBarking', label: 'æœƒå®¹æ˜“å å«å—', required: true, options: ['æœƒ', 'ä¸æœƒ'] },
                                    { id: 'hasBoardingExp', label: 'æœ‰ä½å®¿éçš„ç¶“é©—å—', required: true, options: ['æœ‰', 'æ²’æœ‰'] },
                                    { id: 'isFoodGuarding', label: 'æœƒè­·é£Ÿå—', required: true, options: ['æœƒ', 'ä¸æœƒ'] },
                                    { id: 'useToiletPad', label: 'æœƒåœ¨å°¿å¸ƒå¢Šä¸Šä¸Šå»æ‰€å—', required: true, options: ['æœƒ', 'ä¸æœƒ'] },
                                    { id: 'vaccine', label: 'æ¯å¹´å®šæœŸæ–½æ‰“ç–«è‹— (è«‹æä¾›ç–«è‹—æ‰‹å†Š)', required: true, options: ['æœ‰', 'æ²’æœ‰'] },
                                    { id: 'deworm', label: 'æ¯æœˆå®šæœŸé©…èŸ²é é˜²', required: true, options: ['æœ‰', 'ç„¡'] },
                                ].map((q, idx) => (
                                    <div key={idx} className="space-y-2">
                                        <label className="text-sm font-bold text-soosi-dark ml-1">{q.label} {q.required && <span className="text-red-500">*</span>}</label>
                                        <div className="flex gap-4">
                                            {q.options.map(opt => (
                                                <label key={opt} className={`flex-1 flex items-center justify-center gap-2 p-3 rounded-xl border cursor-pointer transition-all ${formData[q.id] === opt ? 'bg-soosi-green text-white border-soosi-green shadow-md' : 'bg-white border-gray-200 text-gray-400 hover:bg-gray-50'}`}>
                                                    <input type="radio" name={q.id} value={opt} checked={formData[q.id] === opt} onChange={handleInputChange} className="hidden" />
                                                    <span className="font-bold">{opt}</span>
                                                </label>
                                            ))}
                                        </div>
                                    </div>
                                ))}

                                {/* ç± å…§è¨“ç·´ (è¤‡é¸) */}
                                <div className="space-y-3 pt-2">
                                    <label className="text-sm font-bold text-soosi-dark ml-1">ç± å…§è¨“ç·´ç‹€æ³ (å¯è¤‡é¸) <span className="text-red-500">*</span></label>
                                    <div className="bg-orange-50 p-3 rounded-lg text-xs text-orange-800 border border-orange-100 mb-2">
                                        ğŸ’¡ ä½•è¬‚ç± å…§è¨“ç·´ï¼šèƒ½åœ¨åœæ¬„æˆ–æˆ¿é–“å…§ç¨ç«‹ä¼‘æ¯ï¼Œä¸ç„¦æ…®ã€ä¸æŒçºŒå å«ã€ä¸æ¿€å‹•è¡æ’
                                    </div>
                                    <div className="space-y-2">
                                        {[
                                            'æœ‰ å¹³å¸¸åœ¨å®¶éƒ½æœ‰åœ¨åœæ¬„å…§æˆ–ç± å­ç¡è¦º',
                                            'æœ‰ ä»¥å‰æœ‰è¨“ç·´é ä½†æ—¥å¸¸æ²’æœ‰ç¶­æŒ',
                                            'æœ‰ ä½†ä¸ç¢ºèªç¾åœ¨èƒ½ä¸èƒ½é©æ‡‰',
                                            'æ²’æœ‰ ä½†ä¹‹å‰åœ¨å¤–ä½å®¿ åœ¨æˆ¿é–“å¯ä»¥é©æ‡‰å¾—å¾ˆå¥½',
                                            'å¾ä¾†æ²’æœ‰'
                                        ].map((opt, i) => (
                                            <label key={i} className="flex items-start gap-3 p-3 rounded-xl border border-gray-200 hover:bg-gray-50 cursor-pointer transition-colors">
                                                <input 
                                                    type="checkbox" 
                                                    value={opt} 
                                                    checked={(formData.crateTraining || []).includes(opt)}
                                                    onChange={(e) => handleCheckboxChange(e, 'crateTraining')}
                                                    className="mt-1 w-4 h-4 text-soosi-green border-gray-300 rounded focus:ring-soosi-green" 
                                                />
                                                <span className="text-sm text-soosi-dark font-medium leading-relaxed">{opt}</span>
                                            </label>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* å€å¡Š 3: è©³ç´°æ–‡å­—æ•˜è¿° */}
                            <div className="bg-white p-6 rounded-3xl shadow-sm border border-soosi-green/10 space-y-6">
                                <h3 className="font-black text-lg text-soosi-green flex items-center gap-2 border-b border-soosi-green/10 pb-2">
                                    <Icon name="message-square" size={20}/> ç‹—ç‹—çš„æ—¥å¸¸æƒ…å½¢åŠæ³¨æ„äº‹é …
                                </h3>
                                
                                <div className="space-y-1">
                                    <label className="text-sm font-bold text-soosi-dark ml-1">æœ‰å°ä»€éº¼éæ•å— (ä¾‹å¦‚:é›è‚‰æˆ–ç‰›è‚‰)</label>
                                    <input type="text" name="allergies" value={formData.allergies || ''} onChange={handleInputChange} placeholder="è«‹å¡«å¯«éæ•æº..." className="w-full bg-gray-50 border-0 rounded-xl p-3 focus:ring-2 focus:ring-soosi-green/30" />
                                </div>

                                <div className="space-y-1">
                                    <label className="text-sm font-bold text-soosi-dark ml-1">å€‹æ€§å¦‚ä½•å‘¢? æœ‰åˆ†é›¢ç„¦æ…®å—? <span className="text-red-500">*</span></label>
                                    <textarea name="personality" required value={formData.personality || ''} onChange={handleInputChange} rows="3" placeholder="è«‹æè¿°å€‹æ€§ã€æ˜¯å¦è¦ªäººè¦ªç‹—ã€åˆ†é›¢ç„¦æ…®ç‹€æ³..." className="w-full bg-gray-50 border-0 rounded-xl p-3 focus:ring-2 focus:ring-soosi-green/30 resize-none"></textarea>
                                </div>

                                <div className="space-y-1">
                                    <label className="text-sm font-bold text-soosi-dark ml-1">æœ‰éœ€è¦ç‰¹åˆ¥æ³¨æ„çš„å—? ä»»ä½•äº‹æƒ…éƒ½å¯ä»¥èªªè¶Šè©³ç´°è¶Šå¥½</label>
                                    <textarea name="specialNotes" value={formData.specialNotes || ''} onChange={handleInputChange} rows="3" placeholder="ä¾‹å¦‚ï¼šå®³æ€•æ‰“é›·ã€ä¸å–œæ­¡è¢«æ‘¸è…³..." className="w-full bg-gray-50 border-0 rounded-xl p-3 focus:ring-2 focus:ring-soosi-green/30 resize-none"></textarea>
                                </div>
                            </div>
                        </div>
                    )}
                        {/* Legal & Signature */}
                        <section className="cute-card p-8 space-y-8">
                            <div className="flex items-center gap-3 border-b-2 border-dashed border-soosi-wood/10 pb-4">
                                <span className="text-2xl">ğŸ“</span>
                                <h3 className="text-lg font-black text-soosi-dark">æ³•å¾‹æ¢æ¬¾èˆ‡æ•¸ä½ç°½ç½²</h3>
                            </div>

                            {/* ä¹™æ–¹è³‡è¨Š */}
                            <div className="bg-[#F9F7F2] p-5 rounded-2xl border border-soosi-wood/10 text-xs text-soosi-wood space-y-2">
                                <h4 className="font-bold border-b border-soosi-wood/10 pb-2 mb-2">ä¹™æ–¹ï¼ˆåº—å®¶ï¼‰è³‡è¨Š</h4>
                                <div className="grid grid-cols-2 gap-2">
                                    <div><span className="opacity-60 block">åº—å®¶åç¨±</span><span className="font-bold">å®¿æ´— Soosi Pet</span></div>
                                    <div><span className="opacity-60 block">è² è²¬äºº</span><span className="font-bold">å¾…ç¢ºèª</span></div>
                                    <div><span className="opacity-60 block">ç‰¹å¯µæ¥­å­—è™Ÿ</span><span className="font-bold">S1140030è™Ÿ</span></div>
                                    <div><span className="opacity-60 block">è¯çµ¡é›»è©±</span><span className="font-bold">å¾…ç¢ºèª</span></div>
                                    <div><span className="opacity-60 block">ç‡Ÿæ¥­æ™‚é–“</span><span className="font-bold">å¾…ç¢ºèª</span></div>
                                    <div className="col-span-2"><span className="opacity-60 block">ç‡Ÿæ¥­åœ°å€</span><span className="font-bold">å°ä¸­å¸‚æ¸…æ°´å€æ–°èˆˆè·¯142-1è™Ÿ</span></div>
                                </div>
                            </div>

<div className="space-y-4">
                                {/* 1. ç¾å®¹æ¢æ¬¾ (æ°¸é é¡¯ç¤ºï¼Œå› ç‚ºä½å®¿ä¹ŸåŒ…å«ç¾å®¹) */}
                                <button type="button" onClick={() => setActiveModal('grooming')} 
                                    className={`w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all ${termsRead.grooming ? 'bg-soosi-green/10 border-soosi-green' : 'bg-white border-soosi-green/30 hover:border-soosi-green'}`}>
                                    <div className="flex items-center gap-3 text-left">
                                        <div className={`p-2 rounded-lg ${termsRead.grooming ? 'bg-soosi-green text-white' : 'bg-[#E8F1EB] text-soosi-green'}`}><Icon name={termsRead.grooming ? "check" : "scissors"} size={20}/></div>
                                        <div>
                                            <div className={`font-bold text-sm text-soosi-dark`}>ã€çŠ¬ã€è²“ç¾å®¹å¥‘ç´„æ¢æ¬¾ã€‘</div>
                                            {!termsRead.grooming && <div className="text-xs text-gray-400">é»æ“Šé–±è®€</div>}
                                        </div>
                                    </div>
                                    <div className={`text-xs font-bold px-3 py-1 rounded-full ${termsRead.grooming ? 'bg-soosi-green text-white' : 'bg-gray-100 text-gray-400'}`}>{termsRead.grooming ? 'å·²å®Œæˆ' : 'å¾…é–±è®€'}</div>
                                </button>

                                {/* 2. ä½å®¿æ¢æ¬¾ (åƒ…ä½å®¿é¡¯ç¤º) */}
                                {isBoarding && (
                                    <button type="button" onClick={() => setActiveModal('boarding')} 
                                        className={`w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all animate-in fade-in ${termsRead.boarding ? 'bg-soosi-wood/10 border-soosi-wood' : 'bg-white border-soosi-wood/30 hover:border-soosi-wood'}`}>
                                        <div className="flex items-center gap-3 text-left">
                                            <div className={`p-2 rounded-lg ${termsRead.boarding ? 'bg-soosi-wood text-white' : 'bg-[#F5EFE9] text-soosi-wood'}`}><Icon name={termsRead.boarding ? "check" : "home"} size={20}/></div>
                                            <div>
                                                <div className={`font-bold text-sm text-soosi-dark`}>ã€çŠ¬ã€è²“ä½å®¿å¥‘ç´„æ¢æ¬¾ã€‘</div>
                                                {!termsRead.boarding && <div className="text-xs text-gray-400">é»æ“Šé–±è®€</div>}
                                            </div>
                                        </div>
                                        <div className={`text-xs font-bold px-3 py-1 rounded-full ${termsRead.boarding ? 'bg-soosi-wood text-white' : 'bg-gray-100 text-gray-400'}`}>{termsRead.boarding ? 'å·²å®Œæˆ' : 'å¾…é–±è®€'}</div>
                                    </button>
                                )}

                                {/* 3. é«˜é¢¨éšªç¾å®¹ (è‹¥ç¬¦åˆé¢¨éšªï¼Œç„¡è«–ç¾å®¹æˆ–ä½å®¿éƒ½é¡¯ç¤º) */}
                                {isHighRisk && (
                                    <button type="button" onClick={() => setActiveModal('highRiskGrooming')} 
                                        className={`w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all animate-in fade-in ${termsRead.highRiskGrooming ? 'bg-soosi-green/10 border-soosi-green' : 'bg-white border-red-200 hover:border-red-400'}`}>
                                        <div className="flex items-center gap-3 text-left">
                                            <div className={`p-2 rounded-lg ${termsRead.highRiskGrooming ? 'bg-soosi-green text-white' : 'bg-red-50 text-red-500'}`}><Icon name={termsRead.highRiskGrooming ? "check" : "alert-triangle"} size={20}/></div>
                                            <div>
                                                <div className={`font-bold text-sm ${termsRead.highRiskGrooming ? 'text-soosi-green' : 'text-red-600'}`}>ã€é«˜é¢¨éšªã€‘ç¾å®¹æœå‹™é¢¨éšªå‘ŠçŸ¥</div>
                                                <div className="text-xs text-gray-400 font-bold">
                                                    {riskType === 'senior' ? 'æª¢æ¸¬åˆ°æ¯›å­©å·²æ»¿ 8 æ­²' : riskType === 'puppy' ? 'æª¢æ¸¬åˆ°æ¯›å­©æœªæ»¿ 5 å€‹æœˆ' : 'æª¢æ¸¬åˆ°æ¯›å­©æœ‰éå¾€ç—…å²'}ï¼Œè«‹å‹™å¿…è©³é–±
                                                </div>
                                            </div>
                                        </div>
                                        <div className={`text-xs font-bold px-3 py-1 rounded-full ${termsRead.highRiskGrooming ? 'bg-soosi-green text-white' : 'bg-red-100 text-red-600'}`}>{termsRead.highRiskGrooming ? 'å·²åŒæ„' : 'å‹™å¿…è©³é–±'}</div>
                                    </button>
                                )}

                                {/* 4. é«˜é¢¨éšªä½å®¿ (åƒ…ä½å®¿ + ç¬¦åˆé¢¨éšªé¡¯ç¤º) */}
                                {isBoarding && isHighRisk && (
                                    <button type="button" onClick={() => setActiveModal('highRiskBoarding')} 
                                        className={`w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all animate-in fade-in ${termsRead.highRiskBoarding ? 'bg-soosi-wood/10 border-soosi-wood' : 'bg-white border-red-200 hover:border-red-400'}`}>
                                        <div className="flex items-center gap-3 text-left">
                                            <div className={`p-2 rounded-lg ${termsRead.highRiskBoarding ? 'bg-soosi-wood text-white' : 'bg-red-50 text-red-500'}`}><Icon name={termsRead.highRiskBoarding ? "check" : "alert-triangle"} size={20}/></div>
                                            <div>
                                                <div className={`font-bold text-sm ${termsRead.highRiskBoarding ? 'text-soosi-wood' : 'text-red-600'}`}>ã€é«˜é¢¨éšªã€‘ä½å®¿æœå‹™é¢¨éšªå‘ŠçŸ¥</div>
                                                <div className="text-xs text-gray-400 font-bold">
                                                    é‡å°é«˜é½¡ã€å¹¼é½¡æˆ–ç—…å²å¯µç‰©ä¹‹ä½å®¿ç‰¹åˆ¥ç´„å®š
                                                </div>
                                            </div>
                                        </div>
                                        <div className={`text-xs font-bold px-3 py-1 rounded-full ${termsRead.highRiskBoarding ? 'bg-soosi-wood text-white' : 'bg-red-100 text-red-600'}`}>{termsRead.highRiskBoarding ? 'å·²åŒæ„' : 'å‹™å¿…è©³é–±'}</div>
                                    </button>
                                )}

{/* ç§»é™¤æ‰‹å‹•å‹¾é¸æ¡†ï¼Œç›´æ¥ç”±æ¢æ¬¾é–±è®€ç‹€æ…‹æ§åˆ¶ç°½åæ¿è§£é– */}
                        </div>

{/* Signature - ä¾è³´æ¢æ¬¾é–±è®€ç‹€æ…‹ (allTermsRead) */}
                        <div className="space-y-3" id="signature">
                            <div className="flex justify-between items-center">
                                {/* ä¿®æ”¹è™•ï¼šç§»é™¤äº† <span className="text-soosi-red text-xs">â—</span> */}
                                <label className="text-sm font-bold text-soosi-wood flex items-center gap-2"><Icon name="pen-tool" size={16}/> æ•¸ä½ç°½å</label>
                                {realtimeSig && <button onClick={()=>setRealtimeSig(null)} className="text-xs text-red-400 font-bold flex items-center gap-1 bg-red-50 px-2 py-1 rounded-full"><Icon name="trash-2" size={12}/> é‡ç°½</button>}
                            </div>
                            
                            {realtimeSig ? (
                                <div className="space-y-3 animate-in fade-in">
                                    <div className="bg-white rounded-2xl border-2 border-soosi-wood/20 p-6 flex justify-center items-center min-h-[180px] shadow-inner relative overflow-hidden">
                                        <div className="absolute inset-0 opacity-5 bg-[radial-gradient(#8E6E53_1px,transparent_1px)] [background-size:12px_12px]"></div>
                                        <img src={realtimeSig} alt="æ‚¨çš„ç°½å" className="max-h-[150px] object-contain relative z-10" />
                                    </div>
                                    <div className="flex items-center justify-end gap-3">
                                        <div className="bg-soosi-green/10 text-soosi-green px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1.5 shadow-sm border border-soosi-green/20">
                                            <Icon name="check-circle" size={14}/> å·²ç°½ç½²
                                        </div>
                                        <div className="text-xs text-gray-400 font-bold">
                                            ç°½ç½²æ™‚é–“ï¼š{new Date().toLocaleString('zh-TW', { hour12: false, year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' })}
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <button onClick={() => { if(allTermsRead) setShowFullSig(true); else alert('è«‹å…ˆå®Œæˆä¸Šæ–¹æ‰€æœ‰å¥‘ç´„æ¢æ¬¾é–±è®€'); }} 
                                    className={`w-full h-36 border-2 border-dashed rounded-2xl flex flex-col items-center justify-center gap-3 transition-all group ${allTermsRead ? 'border-soosi-green bg-white hover:bg-soosi-green/5 cursor-pointer' : 'border-gray-200 bg-gray-50 cursor-not-allowed opacity-70'}`}>
                                    <div className={`w-12 h-12 rounded-full flex items-center justify-center transition-all ${allTermsRead ? 'bg-soosi-green text-white group-hover:scale-110 shadow-md' : 'bg-gray-200 text-gray-400'}`}>
                                        <Icon name={allTermsRead ? "pen-tool" : "lock"} size={20}/>
                                    </div>
                                    <div className="text-center">
                                        <div className={`text-sm font-bold ${allTermsRead ? 'text-soosi-dark' : 'text-gray-400'}`}>{allTermsRead ? "é»æ“Šæ­¤è™•é–‹å§‹ç°½å" : "è«‹å…ˆå®Œæˆä¸Šæ–¹æ¢æ¬¾é–±è®€"}</div>
                                        <div className="text-xs text-gray-400 mt-1">{allTermsRead ? "é–‹å•Ÿå…¨è¢å¹•æ‰‹å¯«æ¿" : "é–±è®€ä¸¦åŒæ„å¾Œè§£é–"}</div>
                                    </div>
                                </button>
                            )}
                            {errors.signature && <div className="field-error"><Icon name="alert-circle" size={12}/>{errors.signature}</div>}
                        </div>

                        {/* Submit */}
                        <button onClick={handleSubmit} disabled={isSubmitting || !realtimeSig} className="w-full py-5 bg-soosi-dark text-white rounded-[2rem] font-black text-lg shadow-xl hover:shadow-2xl hover:-translate-y-1 active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:transform-none">
                            {isSubmitting ? <Icon name="loader-2" className="animate-spin"/> : <Icon name="send" />}
                            {isSubmitting ? 'æäº¤ä¸­...' : 'ç¢ºèªä¸¦æäº¤æ•¸ä½å¥‘ç´„'}
                        </button>
                        </section>
                    </main>

                    {/* Fullscreen Signature Modal */}
                    {showFullSig && (
                        <div className="fullscreen-signature flex flex-col animate-in fade-in duration-200">
                            <div className="bg-soosi-wood text-white p-4 flex justify-between items-center shadow-md shrink-0">
                                <div className="font-bold flex items-center gap-2"><Icon name="pen-tool"/> è«‹ç°½å</div>
                                <button onClick={()=>setShowFullSig(false)}><Icon name="x"/></button>
                            </div>
                            <div className="flex-1 bg-[#F9F7F2] relative touch-none cursor-crosshair overflow-hidden">
                                <canvas ref={sigCanvasRef} className="w-full h-full block"></canvas>
                            </div>
                            <div className="p-4 bg-white border-t flex gap-3 safe-area-bottom shrink-0">
                                <button onClick={()=>{padInstance.current?.clear()}} className="flex-1 py-3 bg-gray-100 text-gray-600 rounded-xl font-bold">é‡å¯«</button>
                                <button onClick={()=>{
                                    if(!padInstance.current?.isEmpty()) {
                                        setRealtimeSig(padInstance.current.toDataURL());
                                        setShowFullSig(false);
                                        if(errors.signature) setErrors(p=>({...p, signature:null}));
                                    } else alert("è«‹å…ˆç°½å");
                                }} className="flex-[2] py-3 bg-soosi-green text-white rounded-xl font-bold shadow-lg">ç¢ºèªç°½å</button>
                            </div>
                        </div>
                    )}

                    {/* Terms Modals */}
<TermsModal isOpen={activeModal === 'grooming'} onClose={()=>setActiveModal(null)} title="ç¾å®¹æœå‹™å¥‘ç´„æ¢æ¬¾" onAgree={()=>setTermsRead(p=>({...p, grooming:true}))}>
                        <div className="space-y-6 text-sm text-soosi-dark leading-relaxed">
                            {/* Intro */}
                            <div className="bg-soosi-green/10 p-4 rounded-xl border border-soosi-green/20">
                                <h4 className="font-black text-soosi-green mb-2 text-base">ç¾å®¹æœå‹™åŒæ„æ›¸</h4>
                                <p className="text-xs font-bold text-soosi-dark/80">ç‚ºä¿éšœå¯µç‰©å®‰å…¨åŠæœå‹™å“è³ªï¼Œé ç´„å‰è«‹è©³é–±ã€‚ç•¶æ‚¨é ç´„ï¼Œå³è¦–ç‚ºå·²å……åˆ†äº†è§£ä¸¦åŒæ„éµå®ˆä»¥ä¸‹æ‰€æœ‰è¦å®šã€‚</p>
                            </div>

                            {/* ä¸€ã€å…±é€šæ¢æ¬¾ */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">ä¸€ã€å…±é€šæ¢æ¬¾</h5>
                                <ul className="list-decimal pl-5 space-y-2 marker:text-soosi-wood marker:font-bold">
                                    <li><span className="font-bold">æœå‹™å…¬ç´„èˆ‡ä»˜æ¬¾ï¼š</span>é£¼ä¸»åŒæ„éµå®ˆæœ¬å·¥ä½œå®¤ä¹‹å…¬ç´„ã€è¨ˆè²»æ–¹å¼åŠç›¸é—œè¦å‰‡ï¼Œä¸¦å¦‚å¯¦ä»˜æ¬¾ã€‚</li>
                                    <li><span className="font-bold">è¯çµ¡è³‡æ–™æ­£ç¢ºæ€§ï¼š</span>ç¢ºä¿æœå‹™æœŸé–“ï¼ˆ10:00-20:00ï¼‰è¯ç¹«æš¢é€šã€‚å› è³‡è¨ŠéŒ¯èª¤é€ æˆä¹‹æå¤±ç”±é£¼ä¸»è² è²¬ã€‚</li>
                                    <li><span className="font-bold text-soosi-red">å¥åº·ç‹€æ³èª å¯¦ç”³å ±ï¼š</span>å‹™å¿…å‘ŠçŸ¥ç‰¹æ®Šç—…å²ã€éæ•ã€è¿‘æœŸæ‰‹è¡“æˆ–æ”»æ“Šæ€§ã€‚å› éš±çé€ æˆä¹‹æå®³ï¼Œé£¼ä¸»é ˆè² å…¨è²¬ã€‚</li>
                                    <li><span className="font-bold">æ½›åœ¨é¢¨éšªèªçŸ¥ï¼š</span>æœå‹™æœŸé–“æˆ–è¿”å®¶ä¸ƒæ—¥å…§ç™¼ç”Ÿä¹‹ç–¾ç—…ï¼Œæœ¬å·¥ä½œå®¤ä¸è² ç›¸é—œè²¬ä»»ã€‚</li>
                                    <li><span className="font-bold">å°±è¨ºé†«é™¢è³‡è¨Šï¼š</span>è«‹æä¾›å¯µç‰©å›ºå®šå°±è¨ºé†«é™¢ä»¥åˆ©å¿…è¦æ™‚æŸ¥è©¢ç—…æ­·ã€‚</li>
                                    <li><span className="font-bold">æœå‹™æ‹’çµ•æ¬Šåˆ©ï¼š</span>è‹¥æ‚£æœ‰å‚³æŸ“ç—…ã€åš´é‡æ”»æ“Šæ€§æˆ–éœ€ç‰¹æ®Šç…§è­·æœªå‘ŠçŸ¥ï¼Œä¿æœ‰æ‹’çµ•æœå‹™æ¬Šåˆ©ã€‚</li>
                                    <li><span className="font-bold">è³‡æ–™è®Šæ›´é€šçŸ¥ï¼š</span>è³‡æ–™è®Šæ›´å¾Œä¸‰æ—¥å…§éœ€ä¸»å‹•ä»¥LINEé€šçŸ¥ã€‚</li>
                                </ul>
                            </div>

                            {/* äºŒã€æœå‹™é …ç›®èˆ‡æ”¶è²» */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">äºŒã€æœå‹™é …ç›®èˆ‡æ”¶è²»</h5>
                                <div className="space-y-3">
                                    <p>1. æ”¶è²»ä¾é«”å‹æ¯›é‡ç¾å ´å ±åƒ¹ã€‚è‹¥ç™¼ç¾è·³èš¤å£è¨ï¼Œå°‡æ”¶å–ç’°å¢ƒæ¸…æ½”è²» <span className="text-soosi-red font-black">$1,000</span>ã€‚æ‰“çµèˆ‡å»¢æ¯›è™•ç†è²»å¦è¨ˆï¼ˆæ‹†çµ <span className="font-bold">$200èµ·</span>ã€å»¢æ¯› <span className="font-bold">$100èµ·</span>ï¼‰ã€‚</p>
                                    <p>2. ç¾å®¹æœå‹™å®Œæˆå¾Œæ•ä¸æ¥å—ç•°è­°ã€é€€æ¬¾ï¼Œè²»ç”¨é ˆæ–¼ç•¶æ—¥æ”¯ä»˜å®Œæˆã€‚</p>
                                    <p>3. è‹¥éç¨‹æƒ…ç·’éæ–¼ç·Šå¼µæˆ–æœ‰æ”»æ“Šè¡Œç‚ºï¼Œå°‡ç«‹å³çµ‚æ­¢æœå‹™ä¸”ä¸äºˆæ”¶è²»ã€‚</p>
                                    <p>4. è‹¥éœ€é¡å¤–å”åŠ©å®‰æ’«ï¼Œå°‡é…Œæ”¶æƒ…ç·’ç®¡ç†è²» <span className="font-bold">$300-$500</span>ã€‚</p>
                                    
                                    <div className="bg-gray-50 p-3 rounded-lg border border-gray-100">
                                        <p className="font-bold text-soosi-wood mb-1">5. é€¾æ™‚å®‰è¦ªè²» (é€šçŸ¥å¾Œ2å°æ™‚æœªæ¥å›)ï¼š</p>
                                        <ul className="list-disc pl-4 text-xs space-y-1 text-gray-600">
                                            <li>å°å‹çŠ¬ï¼š$90/æ™‚</li>
                                            <li>ä¸­å‹çŠ¬ï¼š$100/æ™‚</li>
                                            <li>å¤§å‹çŠ¬ï¼š$120/æ™‚</li>
                                            <li>è²“å’ªï¼š$90/æ™‚</li>
                                        </ul>
                                    </div>

                                    <div className="bg-soosi-accent/10 border border-soosi-accent/30 p-4 rounded-xl space-y-2 relative overflow-hidden">
                                        <div className="absolute top-0 right-0 bg-soosi-accent text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg">å„ªæƒ æ–¹æ¡ˆ</div>
                                        <p className="font-black text-soosi-wood">â˜… äº”æ¬¡ç¾å®¹é€£çºŒå›è¨ªå„ªæƒ æ–¹æ¡ˆ</p>
                                        <ul className="list-disc pl-4 text-xs space-y-1 text-soosi-dark/90">
                                            <li><span className="font-bold">æ¢ä»¶ï¼š</span>é¦–æ¬¡èµ· 35æ—¥å…§ å®Œæˆç¬¬1è‡³4æ¬¡ç¾å®¹ã€‚</li>
                                            <li><span className="font-bold">æŠ˜æ‰£ï¼š</span>ç¬¬4æ¬¡å¾Œ 15æ—¥å…§ å›è¨ªç¬¬5æ¬¡ï¼Œäº« <span className="font-bold text-soosi-red">$200 æŠ˜æŠµ</span>ã€‚</li>
                                            <li>åƒ…é™åŒä¸€æ¯›å­©ï¼Œä¸å¾—è½‰è®“ã€æ‹†åˆ†æˆ–å…Œç¾ã€‚é€¾æœŸè¦–åŒæ”¾æ£„ã€‚</li>
                                            <li>è‹¥æ¯›å­©å¥åº·ç‹€æ³ä¸é©åˆç¹¼çºŒç¾å®¹ï¼Œé›™æ–¹å¾—å¦è¡Œå”è­°ã€‚</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            {/* ä¸‰ã€å¥åº·èˆ‡æ¥å¾…è¦å®š */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">ä¸‰ã€å¥åº·èˆ‡æ¥å¾…è¦å®š</h5>
                                <div className="space-y-3">
                                    <div className="bg-red-50 p-3 rounded-lg border border-red-100 text-soosi-red text-xs font-bold space-y-2">
                                        <div className="flex items-center gap-2 text-sm"><Icon name="x-circle" size={16}/> <span>æˆ‘å€‘ç„¡æ³•æ¥å¾…ï¼š</span></div>
                                        <ul className="list-disc pl-5 space-y-1 text-soosi-dark">
                                            <li>æœªæ»¿3å€‹æœˆã€æœªæ‰“å®Œä¸‰åŠ‘ç–«è‹—ã€æ¥ç¨®ç–«è‹—ä¸€å‘¨å…§ä¹‹å¹¼çŠ¬è²“ã€‚</li>
                                            <li>èº«ä¸Šæœ‰æ´»é«”å¯„ç”ŸèŸ²ã€‚</li>
                                            <li>æ‚£æœ‰å¿ƒè‡Ÿç—…ã€ç™²ç™‡ã€å‚³æŸ“ç—…ï¼ˆè²“ç˜Ÿ/FIV/FeLV/é»´èŒç­‰ï¼‰ã€åš´é‡å‘¼å¸é“æˆ–è…è‡Ÿç–¾ç—…ã€‚</li>
                                        </ul>
                                    </div>
                                    <p className="text-xs">2. è‹¥ç¾å ´ç™¼ç¾ä¸Šè¿°ç‹€æ³ï¼ˆå¦‚å¯„ç”ŸèŸ²ã€æ‰“å™´åšã€é»´èŒï¼‰ï¼Œå°‡é€€å›ä¸¦æ”¶å–ç’°å¢ƒæ¸…æ½”è²» <span className="text-soosi-red font-bold">$1,000</span>ã€‚</p>
                                    <p className="text-xs">3. è‹¥æ•…æ„éš±çæ”»æ“Šè¡Œç‚ºå°è‡´äººå“¡å—å‚·ï¼Œé£¼ä¸»é ˆè² è²¬ç›¸é—œé†«ç™‚è²»ç”¨ã€‚</p>
                                </div>
                            </div>

                            {/* å››ã€å…¶ä»–æ¢æ¬¾ (åŸä¸‰) */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">å››ã€å…¶ä»–æ¢æ¬¾</h5>
                                <ul className="list-decimal pl-5 space-y-2">
                                    <li><span className="font-bold">è¼•å¾®å—å‚·è™•ç½®ï¼š</span>å› ä¸å¯æŠ—åŠ›å°è‡´å°æ–¼1å…¬åˆ†ä¹‹æ·ºè¡¨å‚·å£ï¼Œå·¥ä½œå®¤å°‡æ¶ˆæ¯’æ¸…æ½”ã€‚é£¼ä¸»å›å¾Œ24å°æ™‚å…§ç„¡ç•°è­°è¦–åŒæ¥å—ã€‚</li>
                                    <li className="bg-gray-50 p-3 rounded-lg -ml-2">
                                        <span className="font-bold block mb-1">æ„å¤–äº‹æ•…èˆ‡è³ å„Ÿæ¨™æº–ï¼š</span>
                                        <span className="text-xs text-gray-600 block mb-2">è‹¥å› å·¥ä½œå®¤é‡å¤§ç–å¤±å°è‡´å—å‚·æˆ–å¾€ç”Ÿï¼Œç¶“ä¿éšªå¯©æ ¸æœªç†è³ æ™‚ï¼Œä¾ä»¥ä¸‹æ¨™æº–è£œå„Ÿï¼š</span>
                                        <div className="flex gap-2">
                                            <span className="bg-white border px-2 py-1 rounded text-xs font-bold text-soosi-dark">å—å‚·é†«ç™‚ä¸Šé™ $2,000</span>
                                            <span className="bg-white border px-2 py-1 rounded text-xs font-bold text-soosi-dark">æ„å¤–å¾€ç”Ÿæ…°æ’«é‡‘ä¸Šé™ $5,000</span>
                                        </div>
                                        <span className="text-[10px] text-gray-400 mt-1 block">è¶…éä¸Šè¿°é‡‘é¡éƒ¨åˆ†ï¼Œä¸å¦è² æ“”è³ å„Ÿè²¬ä»»ã€‚</span>
                                    </li>
                                    <li><span className="font-bold">ç·Šæ€¥å°±é†«ï¼š</span>çªç™¼ç‹€æ³ç„¡æ³•å³æ™‚è¯çµ¡æ™‚ï¼Œæˆæ¬Šåº—å®¶é€é†«è™•ç½®ï¼Œè²»ç”¨ç”±é£¼ä¸»è² æ“”ã€‚è‹¥éåº—å®¶ç–å¤±ï¼ˆå¦‚éš±çç—…æƒ…ï¼‰ï¼Œä¸è² è³ å„Ÿè²¬ä»»ã€‚</li>
                                    <li>æœ¬å·¥ä½œå®¤éå‹•ç‰©é†«é™¢ï¼Œä¸æä¾›é†«ç™‚è¡Œç‚ºã€‚é€¾ä¸‰æ—¥æœªæ¥å›ä¾å‹•ä¿æ³•é€šå ±ã€‚</li>
                                </ul>
                            </div>

                            {/* äº”~å…«ã€æ³•å¾‹èˆ‡å€‹è³‡ (åˆä½µé¡¯ç¤ºä»¥ç¯€çœç©ºé–“ï¼Œä½†ä¿ç•™å®Œæ•´æ„ç¾©) */}
                            <div className="bg-[#F9F7F2] p-4 rounded-xl border border-soosi-wood/10 space-y-4 text-xs text-gray-600">
                                <div>
                                    <h6 className="font-bold text-soosi-wood text-sm mb-1">äº”ã€å€‹äººè³‡æ–™èˆ‡å½±åƒæˆæ¬Š</h6>
                                    <p>åŒæ„å€‹è³‡ç”¨æ–¼æœå‹™è¯ç¹«èˆ‡è¡ŒéŠ·ã€‚åŒæ„ç„¡å„Ÿæˆæ¬Šå¯µç‰©å½±åƒç”¨æ–¼å®˜æ–¹å®£å‚³ï¼Œè‹¥ä¸åŒæ„è«‹æå‰å‘ŠçŸ¥ï¼Œå°‡ä¸æœƒä¸Šå‚³ã€‚</p>
                                </div>
                                <div>
                                    <h6 className="font-bold text-soosi-wood text-sm mb-1">å…­ã€çˆ­è­°è™•ç†èˆ‡ç®¡è½„</h6>
                                    <p>æœå‹™çˆ­è­°é ˆæ–¼7æ—¥å…§ç”³è¨´ï¼Œä»¥ç¸é†«è¨ºæ–·ç‚ºæº–ã€‚é›™æ–¹åŒæ„ä»¥è‡ºç£æ²™é¹¿åœ°æ–¹æ³•é™¢ç‚ºç¬¬ä¸€å¯©ç®¡è½„æ³•é™¢ã€‚</p>
                                </div>
                                <div>
                                    <h6 className="font-bold text-soosi-wood text-sm mb-1">ä¸ƒã€ç›£è¦–å™¨èª¿é–±</h6>
                                    <p>äº‹æ•…ç™¼ç”Ÿå¾Œ3æ—¥å…§å¯ç”³è«‹èª¿é–±ç›¸é—œç‰‡æ®µã€‚é¦–æ¬¡å…è²»ï¼Œå†æ¬¡ç”³è«‹é…Œæ”¶è¡Œæ”¿è²» $200/æ¬¡ã€‚</p>
                                </div>
                                <div>
                                    <h6 className="font-bold text-soosi-wood text-sm mb-1">å…«ã€æ¢æ¬¾æ•ˆåŠ›èˆ‡ä¿®æ”¹</h6>
                                    <p>æœ¬åŒæ„æ›¸ç°½ç½²å³å…·æ°¸ä¹…æ•ˆåŠ›ã€‚å·¥ä½œå®¤ä¿æœ‰ä¿®è¨‚æ¬Šåˆ©ï¼Œå…¬å‘Šæ–¼å®˜æ–¹LINEå³ç”Ÿæ•ˆã€‚</p>
                                </div>
                            </div>
                            
                            <div className="text-center text-xs text-soosi-wood/40 mt-6 font-bold tracking-widest">
                                --- é–±è®€å®Œç•¢è«‹å‘ä¸‹æ»‘å‹•ä»¥è§£é–åŒæ„æŒ‰éˆ• ---
                            </div>
                        </div>
                    </TermsModal>

                    {/* 2. ä½å®¿æ¢æ¬¾ Modal */}

<TermsModal isOpen={activeModal === 'boarding'} onClose={()=>setActiveModal(null)} title="ä½å®¿å®‰è¦ªå¥‘ç´„æ¢æ¬¾" onAgree={()=>setTermsRead(p=>({...p, boarding:true}))}>
                        <div className="space-y-6 text-sm text-soosi-dark leading-relaxed">
                            {/* Intro */}
                            <div className="bg-soosi-wood/10 p-4 rounded-xl border border-soosi-wood/20">
                                <h4 className="font-black text-soosi-wood mb-2 text-base">ä½å®¿æœå‹™åŒæ„æ›¸</h4>
                                <p className="text-xs font-bold text-soosi-dark/80">ç‚ºä¿éšœå¯µç‰©å®‰å…¨ï¼Œè«‹è©³é–±ã€‚é ç´„å³è¦–ç‚ºåŒæ„éµå®ˆä»¥ä¸‹è¦å®šã€‚ä½å®¿æœŸé–“åŒ…å«åŸºæœ¬ç¾å®¹æœå‹™ï¼Œæ•…éœ€åŒæ™‚åŒæ„ç¾å®¹æ¢æ¬¾ã€‚</p>
                            </div>

                            {/* ä¸€ã€åŸºæœ¬æ¢æ¬¾ */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">ä¸€ã€åŸºæœ¬æ¢æ¬¾</h5>
                                <ul className="list-decimal pl-5 space-y-2 marker:text-soosi-wood marker:font-bold">
                                    <li><span className="font-bold">æœå‹™æ‰¿è«¾ï¼š</span>é£¼ä¸»åŒæ„éµå®ˆå…¬ç´„ã€è¨ˆè²»æ–¹å¼ä¸¦å¦‚å¯¦ä»˜æ¬¾ã€‚</li>
                                    <li><span className="font-bold">è¯çµ¡æš¢é€šï¼š</span>æœå‹™æœŸé–“ï¼ˆ10:00-20:00ï¼‰è«‹ä¿æŒè¯ç¹«ã€‚è‹¥è³‡è¨ŠéŒ¯èª¤å°è‡´æå¤±ç”±é£¼ä¸»è² è²¬ã€‚</li>
                                    <li><span className="font-bold text-soosi-red">èª å¯¦ç”³å ±ï¼š</span>é ˆå‘ŠçŸ¥ç‰¹æ®Šç—…å²ã€éæ•ã€è¿‘æœŸæ‰‹è¡“æˆ–æ”»æ“Šæ€§ã€‚éš±çé€ æˆä¹‹æå®³é ˆè² å…¨è²¬ã€‚</li>
                                    <li><span className="font-bold">é¢¨éšªèªçŸ¥ï¼š</span>æœå‹™æœŸé–“æˆ–è¿”å®¶ä¸ƒæ—¥å…§ç™¼ç”Ÿä¹‹ç–¾ç—…ï¼Œæœ¬å…¬å¸ä¸è² ç›¸é—œè²¬ä»»ã€‚</li>
                                    <li><span className="font-bold">æ‹’çµ•æ¬Šåˆ©ï¼š</span>è‹¥æ‚£æœ‰å‚³æŸ“ç—…ã€åš´é‡æ”»æ“Šæ€§æˆ–æœªå‘ŠçŸ¥ä¹‹ç‰¹æ®Šç…§è­·éœ€æ±‚ï¼Œä¿æœ‰æ‹’çµ•æœå‹™æ¬Šã€‚</li>
                                </ul>
                            </div>

                            {/* äºŒã€å…¥ä½é ˆçŸ¥èˆ‡å¥åº·è¦ç¯„ */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">äºŒã€å…¥ä½é ˆçŸ¥èˆ‡å¥åº·è¦ç¯„</h5>
                                <div className="space-y-3">
                                    <p>1. <span className="font-bold">æ™‚é–“ï¼š</span>ä»¥ã€Œæ™šã€è¨ˆåƒ¹ï¼Œå…¥é€€æˆ¿æ™‚é–“ <span className="font-bold">10:00-20:00</span>ã€‚é€¾æ™‚éœ€éš”æ—¥æ¥å›ä¸¦æ”¯ä»˜éå¤œè²»ã€‚</p>
                                    <p>2. <span className="font-bold">å»ºæª”ï¼š</span>éœ€æä¾›èº«åˆ†è­‰æ­£åé¢å»ºæª”ä»¥é˜²æ£„é¤Šã€‚</p>
                                    <div className="bg-red-50 p-3 rounded-lg border border-red-100 space-y-2">
                                        <p className="font-bold text-soosi-red text-xs">âš ï¸ ç–«è‹—èˆ‡é©…èŸ²è¦æ±‚</p>
                                        <ul className="list-disc pl-5 text-xs text-soosi-dark space-y-1">
                                            <li>æœªæ¥ç¨®/éæœŸç–«è‹—è€…ï¼Œé£¼ä¸»é ˆæ‰¿æ“”å‚³æŸ“é¢¨éšªã€‚</li>
                                            <li>é ˆå®Œæˆé«”å…§å¤–é©…èŸ²ã€‚è‹¥ç™¼ç¾å¯„ç”ŸèŸ²ä¸”ç„¡æ³•æä¾›è­‰æ˜ï¼Œå°‡ä»£ç‚ºé€é†«ä¸¦æ”¶å–è²»ç”¨ <span className="font-bold text-soosi-red">$500èµ·</span>ã€‚</li>
                                        </ul>
                                    </div>
                                    <p>4. ç‹—ç‹—å…¥ä½ä¸‰å¤©å…§éœ€æ–¼æœ¬é¤¨æ´—æ¾¡ï¼›è²“å’ªä¸å¼·è¿«ã€‚</p>
                                    <p>5. ç‹—ç‹—é ˆå®Œæˆ2å°æ™‚å®‰è¦ªæ¸¬è©¦ï¼ˆä¸å¯èˆ‡ä½å®¿åŒæ—¥ï¼‰ï¼›è²“å’ªå…å®‰è¦ªï¼Œä½†å…·å¼·çƒˆæ”»æ“Š/ç„¦æ…®è€…ä¸æ¥å¾…ã€‚</p>
                                </div>
                            </div>

                            {/* ä¸‰ã€ä½å®¿èˆ‡ç…§è­·å®‰æ’ (ä¿®æ­£ç·¨è™Ÿ) */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">ä¸‰ã€ä½å®¿èˆ‡ç…§è­·å®‰æ’</h5>
                                <ul className="list-decimal pl-5 space-y-2">
                                    <li><span className="font-bold">æ”¾é¢¨ï¼š</span>æ¯æ—¥2æ¬¡ã€‚è‹¥ä¸å¸Œæœ›åƒèˆ‡ã€æˆ–å¯µç‰©æœ‰å¥åº·ç–‘æ…®ï¼Œè«‹ä¸»å‹•å‘ŠçŸ¥ã€‚ï¼ˆæœªæ–½æ‰“ç–«è‹—ã€é«˜é½¡ã€æœªçµç´®è€…ä¸å®‰æ’å…±åŒæ”¾é¢¨ï¼‰ã€‚</li>
                                    <li><span className="font-bold">é£²é£Ÿï¼š</span>ç‰¹æ®Šé£²é£Ÿç…§è­·æ¯æ—¥åŠ æ”¶ <span className="font-bold">$100-$500</span>ã€‚è‹¥è‡ªå‚™é£Ÿç‰©ä¸è¶³ï¼Œä»£è³¼è²»ç”¨å¦è¨ˆã€‚</li>
                                    <li><span className="font-bold">ç‰©å“ï¼š</span>è«‹è‡ªå‚™ç†Ÿæ‚‰ç‰©å“ã€‚æŠ¬è…³å°¿å°¿ç‹—ç‹—å°‡ç©¿æˆ´ç¦®è²Œå¸¶ã€‚</li>
                                    <li><span className="font-bold">æå£è³ å„Ÿï¼š</span>è‹¥å¯µç‰©ç ´å£è¨­æ–½ï¼Œé£¼ä¸»é ˆç…§åƒ¹è³ å„Ÿã€‚</li>
                                </ul>
                            </div>

                            {/* å››ã€ç·Šæ€¥ç‹€æ³èˆ‡é€é†« (ä¿®æ­£ç·¨è™Ÿ) */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">å››ã€ç·Šæ€¥ç‹€æ³èˆ‡é€é†«</h5>
                                <div className="space-y-2">
                                    <p>è‹¥èº«é«”ä¸é©å°‡ç«‹å³é€šçŸ¥ä¸¦é€é†«ã€‚åˆä½œé†«é™¢ç‚º <span className="font-bold">æ³°çˆ¾å‹•ç‰©é†«é™¢</span>ã€‚</p>
                                    <p>è‹¥éœ€ä»£è¾¦é€é†«ï¼Œæ¯æ¬¡é…Œæ”¶ <span className="font-bold">$500</span> è»Šé¦¬è²»ï¼ˆä¸å«è¨ºç™‚è²»ï¼‰ã€‚</p>
                                    <p className="text-xs text-gray-500">â€» è‹¥å› éš±çç—…æ³å°è‡´æ„å¤–ï¼Œç¶“åˆ¤å®šç„¡ç–å¤±ï¼Œåº—å®¶ä¸è² è³ å„Ÿè²¬ä»»ã€‚</p>
                                </div>
                            </div>

                            {/* äº”ã€é ç´„èˆ‡å–æ¶ˆ (ä¿®æ­£ç·¨è™Ÿ) */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">äº”ã€é ç´„èˆ‡å–æ¶ˆæ¢æ¬¾</h5>
                                <p>è¨‚æˆ¿é ˆä»˜50%å®šé‡‘ï¼Œå…¥ä½ç¹³æ¸…ã€‚æå‰é€€å®¿ä¸é€€è²»ã€‚</p>
                                <div className="overflow-hidden rounded-xl border border-gray-200">
                                    <table className="w-full text-xs text-left">
                                        <thead className="bg-gray-100 text-gray-600 font-bold">
                                            <tr><th className="p-2">å–æ¶ˆæ™‚é–“</th><th className="p-2">é€€è²»æ¯”ä¾‹</th></tr>
                                        </thead>
                                        <tbody className="divide-y divide-gray-100">
                                            <tr><td className="p-2">15å¤©å‰</td><td className="p-2 text-soosi-green font-bold">å…¨é¡é€€è²»</td></tr>
                                            <tr><td className="p-2">10-14å¤©å‰</td><td className="p-2">é€€ 70%</td></tr>
                                            <tr><td className="p-2">7-9å¤©å‰</td><td className="p-2">é€€ 50%</td></tr>
                                            <tr><td className="p-2">å°‘æ–¼7å¤©</td><td className="p-2 text-soosi-red font-bold">ä¸é€€å®šé‡‘</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                                <p className="text-[10px] text-gray-400">â€» æ˜¥ç¯€è¦å®šå¦è¨‚ã€‚éæŒ‡å®šéŠ€è¡Œé€€æ¬¾æ‰£æ‰‹çºŒè²»ã€‚</p>
                            </div>

                            {/* å…­ã€å…¶ä»–èˆ‡è²¬ä»» (ä¿®æ­£ç·¨è™Ÿ) */}
                            <div className="space-y-3">
                                <h5 className="font-black text-lg text-soosi-wood border-b-2 border-soosi-wood/10 pb-2">å…­ã€å…¶ä»–èˆ‡è²¬ä»»æ­¸å±¬</h5>
                                
                                <div className="bg-soosi-red/10 border border-soosi-red/20 p-3 rounded-xl">
                                    <p className="font-black text-soosi-red mb-1 text-xs">â›” æ£„é¤Šè™•ç½®</p>
                                    <p className="text-xs text-soosi-dark">é€¾æœŸä¸‰æ—¥æœªé ˜å›ä¸”å¤±è¯è€…ï¼Œè¦–ç‚ºæƒ¡æ„æ£„é¤Šã€‚å°‡äº¤ç”±å‹•ä¿æ©Ÿæ§‹è™•ç†ä¸¦è¿½å„Ÿæ³•å¾‹è²¬ä»»ã€‚</p>
                                </div>

                                <ul className="list-decimal pl-5 space-y-2">
                                    <li><span className="font-bold">ä»£é ˜è¦å®šï¼š</span>éœ€äº‹å…ˆLINEå‘ŠçŸ¥ä»£é ˜äººè³‡è¨Šï¼Œå–å›æ™‚æŸ¥æ ¸è­‰ä»¶ã€‚</li>
                                    <li className="bg-gray-50 p-3 rounded-lg -ml-2">
                                        <span className="font-bold block mb-1">æ„å¤–äº‹æ•…èˆ‡è³ å„Ÿæ¨™æº–ï¼š</span>
                                        <span className="text-xs text-gray-600 block mb-2">è‹¥å› å·¥ä½œå®¤é‡å¤§ç–å¤±å°è‡´å—å‚·æˆ–å¾€ç”Ÿï¼Œç¶“ä¿éšªå¯©æ ¸æœªç†è³ æ™‚ï¼Œä¾ä»¥ä¸‹æ¨™æº–è£œå„Ÿï¼š</span>
                                        <div className="flex gap-2">
                                            <span className="bg-white border px-2 py-1 rounded text-xs font-bold text-soosi-dark">å—å‚·é†«ç™‚ä¸Šé™ $2,000</span>
                                            <span className="bg-white border px-2 py-1 rounded text-xs font-bold text-soosi-dark">æ„å¤–å¾€ç”Ÿæ…°æ’«é‡‘ä¸Šé™ $5,000</span>
                                        </div>
                                        <span className="text-[10px] text-gray-400 mt-1 block">æœ¬å·¥ä½œå®¤éé†«ç™‚æ©Ÿæ§‹ã€‚è¶…éä¸Šè¿°é‡‘é¡éƒ¨åˆ†ï¼Œä¸å¦è² æ“”è³ å„Ÿè²¬ä»»ã€‚</span>
                                    </li>
                                </ul>
                            </div>

                            {/* ä¸ƒ~åã€æ³•å¾‹èˆ‡å€‹è³‡ (åˆä½µé¡¯ç¤º) */}
                            <div className="bg-[#F9F7F2] p-4 rounded-xl border border-soosi-wood/10 space-y-4 text-xs text-gray-600">
                                <div>
                                    <h6 className="font-bold text-soosi-wood text-sm mb-1">ä¸ƒã€æ³•å¾‹èˆ‡å€‹è³‡è²æ˜</h6>
                                    <ul className="list-disc pl-4 space-y-1">
                                        <li>åŒæ„å€‹è³‡ç”¨æ–¼æœå‹™è¯ç¹«èˆ‡è¡ŒéŠ·ï¼›åŒæ„ç„¡å„Ÿæˆæ¬Šå½±åƒç”¨æ–¼å®˜æ–¹å®£å‚³ã€‚</li>
                                        <li>æœå‹™çˆ­è­°é ˆæ–¼7æ—¥å…§ç”³è¨´ã€‚é›™æ–¹åŒæ„ä»¥è‡ºç£æ²™é¹¿åœ°æ–¹æ³•é™¢ç‚ºç¬¬ä¸€å¯©ç®¡è½„æ³•é™¢ã€‚</li>
                                        <li>äº‹æ•…ç™¼ç”Ÿå¾Œ3æ—¥å…§å¯ç”³è«‹èª¿é–±ç›£è¦–å™¨ã€‚é¦–æ¬¡å…è²»ï¼Œå†æ¬¡ç”³è«‹é…Œæ”¶è¡Œæ”¿è²» $200/æ¬¡ã€‚</li>
                                        <li>æœ¬åŒæ„æ›¸ç°½ç½²å³å…·æ°¸ä¹…æ•ˆåŠ›ã€‚æ¢æ¬¾ä¿®è¨‚å…¬å‘Šæ–¼å®˜æ–¹LINEå³ç”Ÿæ•ˆã€‚</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div className="text-center text-xs text-soosi-wood/40 mt-6 font-bold tracking-widest">
                                --- é–±è®€å®Œç•¢è«‹å‘ä¸‹æ»‘å‹•ä»¥è§£é–åŒæ„æŒ‰éˆ• ---
                            </div>
                        </div>
                    </TermsModal>

                    <TermsModal isOpen={activeModal === 'senior'} onClose={()=>setActiveModal(null)} title="é«˜é¢¨éšªå¯µç‰©æœå‹™é¢¨éšªå‘ŠçŸ¥" onAgree={()=>setTermsRead(p=>({...p, senior:true}))}>
                         <div className="space-y-4 border-2 border-red-100 rounded-xl p-4 bg-red-50">
                             <h4 className="font-bold text-center text-lg text-soosi-red border-b border-red-200 pb-2 mb-2">ã€é«˜é¢¨éšªå¯µç‰©åŒæ„æ›¸ã€‘</h4>
                             <p className="font-bold text-soosi-dark">
                                 é‡å° {riskType === 'senior' ? 'é«˜é½¡çŠ¬ (8æ­²ä»¥ä¸Š)' : riskType === 'puppy' ? 'å¹¼çŠ¬ (5å€‹æœˆä»¥ä¸‹)' : 'æ‚£æœ‰éå¾€ç—…å²ä¹‹å¯µç‰©'} ä¹‹ç‰¹åˆ¥ç´„å®šï¼š
                             </p>
                             <ul className="list-disc pl-5 space-y-1 mt-2">
                                <li>æœ¬äººçŸ¥æ‚‰é«˜é½¡/å¹¼é½¡/ç”Ÿç—…å¯µç‰©åœ¨ç¾å®¹æˆ–ä½å®¿éç¨‹ä¸­ï¼Œå› ç·Šè¿«å¯èƒ½å°è‡´æ½›åœ¨ç–¾ç—…ç™¼ä½œã€‚</li>
                                <li>è‹¥å› å¯µç‰©è‡ªèº«å› ç´ ï¼ˆå¦‚å¿ƒè‡Ÿç—…ç™¼ã€ä¼‘å…‹ã€ç™²ç™‡ï¼‰å°è‡´ä¹‹ä¸å¯æŠ—åŠ›æ„å¤–ï¼ŒåŒæ„ä¸è¿½ç©¶åº—å®¶è²¬ä»»ã€‚</li>
                             </ul>
                         </div>
                    </TermsModal>
{/* 3. é«˜é¢¨éšªç¾å®¹ Modal */}
<TermsModal isOpen={activeModal === 'highRiskGrooming'} onClose={()=>setActiveModal(null)} title="é«˜é¢¨éšªç¾å®¹æœå‹™é¢¨éšªå‘ŠçŸ¥" onAgree={()=>setTermsRead(p=>({...p, highRiskGrooming:true}))}>
                        <div className="space-y-5 text-sm text-soosi-dark leading-relaxed">
                            {/* Header Alert */}
                            <div className="bg-red-50 p-4 rounded-xl border border-red-200 text-center shadow-sm">
                                <h4 className="font-black text-soosi-red text-base border-b border-red-200 pb-2 mb-2">ã€é«˜é¢¨éšªå¯µç‰©ç¾å®¹åŒæ„è²æ˜ã€‘</h4>
                                <p className="text-xs font-bold text-red-700">é‡å°é«˜é½¡ã€å¹¼é½¡ã€éå¾€ç—…å²æˆ–è¡Œç‚ºæ•æ„Ÿå¯µç‰©ä¹‹ç‰¹åˆ¥ç´„å®šã€‚</p>
                            </div>

                            {/* ä¸€ã€èª å¯¦å‘ŠçŸ¥ */}
                            <div className="space-y-2">
                                <h5 className="font-black text-soosi-wood border-l-4 border-soosi-wood pl-2">ä¸€ã€é£¼ä¸»èª å¯¦å‘ŠçŸ¥ç¾©å‹™</h5>
                                <p className="text-xs">é£¼ä¸»ç¢ºèªå·²å¦‚å¯¦å‘ŠçŸ¥å¯µç‰©ç‹€æ³ï¼ˆå¹´é½¡ã€å¿ƒè‡Ÿç—…/ç™²ç™‡ç­‰ç—…å²ã€æ‡·å­•ã€éæ•ã€æ”»æ“Šç´€éŒ„ç­‰ï¼‰ã€‚</p>
                                <p className="text-xs font-bold text-soosi-red">â€» è‹¥å› æœªå‘ŠçŸ¥æˆ–æä¾›ä¸å¯¦è³‡è¨Šï¼Œå°è‡´åº—å®¶ç„¡æ³•é è¦‹ä¹‹é¢¨éšªç™¼ç”Ÿï¼Œè²¬ä»»ç”±é£¼ä¸»è‡ªè² ã€‚</p>
                            </div>

                            {/* äºŒã€é«˜é¢¨éšªå‘ŠçŸ¥ (é‡é») */}
                            <div className="bg-red-50/50 p-3 rounded-lg border border-red-100 space-y-2">
                                <h5 className="font-black text-soosi-red border-l-4 border-soosi-red pl-2">äºŒã€é«˜é½¡èˆ‡ç‰¹æ®Šå¥åº·ç‹€æ³é¢¨éšª</h5>
                                <ul className="list-disc pl-5 space-y-1 text-xs text-soosi-dark">
                                    <li><span className="font-bold">é¢¨éšªèªçŸ¥ï¼š</span>é«˜é½¡ã€å¹¼é½¡æˆ–æ…¢æ€§ç—…å¯µç‰©ï¼Œå°å£“åŠ›è€å—åº¦è¼ƒä½ã€‚</li>
                                    <li><span className="font-bold">çªç™¼ç‹€æ³ï¼š</span>ç¾å®¹éç¨‹å¯èƒ½å› ç·Šå¼µèª˜ç™¼ä¼‘å…‹ã€èˆŠç–¾å¾©ç™¼æˆ–ä¸å¯é æœŸä¹‹é¢¨éšªã€‚</li>
                                    <li><span className="font-bold text-red-700">å…è²¬è²æ˜ï¼š</span>è‹¥éå› åº—å®¶æ•…æ„æˆ–é‡å¤§éå¤±ï¼Œè€Œæ˜¯æºæ–¼å¯µç‰©è‡ªèº«å¥åº·å°è‡´ä¹‹ä¸åˆ©çµæœï¼Œæœ¬å·¥ä½œå®¤ä¸è² æå®³è³ å„Ÿè²¬ä»»ã€‚</li>
                                </ul>
                            </div>

                            {/* ä¸‰ã€æ”»æ“Šæ€§é˜²è­· */}
                            <div className="space-y-2">
                                <h5 className="font-black text-soosi-wood border-l-4 border-soosi-wood pl-2">ä¸‰ã€æ”»æ“Šæ€§èˆ‡è¡Œç‚ºå®‰å…¨é˜²è­·</h5>
                                <p className="text-xs">è‹¥å¯µç‰©å‡ºç¾æ”»æ“Šæˆ–éåº¦èºå‹•ï¼Œæˆæ¬Šåº—å®¶æ¡å–å¿…è¦é˜²è­·ï¼ˆå¦‚æˆ´å˜´å¥—ã€ä¿å®šï¼‰ã€‚è‹¥ç¶“åˆ¤æ–·å±åŠå®‰å…¨ï¼Œå¾—éš¨æ™‚ä¸­æ­¢æœå‹™ï¼Œè²»ç”¨ä¾é€²åº¦æ”¶å–ã€‚</p>
                            </div>

                            {/* å››ã€ç·Šæ€¥é†«ç™‚ */}
                            <div className="space-y-2">
                                <h5 className="font-black text-soosi-wood border-l-4 border-soosi-wood pl-2">å››ã€ç·Šæ€¥é†«ç™‚è™•ç½®</h5>
                                <p className="text-xs">ç™¼ç”Ÿç·Šæ€¥ç‹€æ³æ™‚ï¼ŒåŒæ„åº—å®¶å„ªå…ˆé€å¾€æŒ‡å®šæˆ–å°±è¿‘å‹•ç‰©é†«é™¢ï¼Œç›¸é—œè²»ç”¨ç”±é£¼ä¸»è² æ“”ã€‚</p>
                            </div>

                            <div className="text-center text-xs text-gray-400 mt-4 font-bold border-t border-dashed pt-4">
                                æˆ‘å·²è©³é–±ä¸¦å……åˆ†ç†è§£ä¸Šè¿°å…§å®¹ï¼ŒåŒæ„å°‡å¯µç‰©äº¤ä»˜æœå‹™ã€‚
                            </div>
                        </div>
                    </TermsModal>

                    {/* 4. é«˜é¢¨éšªä½å®¿ Modal */}
<TermsModal isOpen={activeModal === 'highRiskBoarding'} onClose={()=>setActiveModal(null)} title="é«˜é¢¨éšªä½å®¿æœå‹™é¢¨éšªå‘ŠçŸ¥" onAgree={()=>setTermsRead(p=>({...p, highRiskBoarding:true}))}>
                        <div className="space-y-5 text-sm text-soosi-dark leading-relaxed">
                            {/* Warning Box - æœ€é‡è¦çš„ç„¡24H */}
                            <div className="bg-soosi-red text-white p-4 rounded-xl shadow-md text-center">
                                <h4 className="font-black text-lg mb-1">âš ï¸ é‡è¦å‘ŠçŸ¥ï¼šç„¡ 24 å°æ™‚ç…§è­·</h4>
                                <p className="text-xs font-bold opacity-90">ä½å®¿æœŸé–“æ™šä¸Šç„¡äººé§åº—ï¼Œè‹¥ç™¼ç”Ÿçªç™¼ç‹€æ³åº—å®¶ç„¡æ³•å³æ™‚è™•ç½®ã€‚</p>
                            </div>

                            {/* ä¸€ã€å¥åº·é¢¨éšªå…è²¬ */}
                            <div className="space-y-2">
                                <h5 className="font-black text-soosi-wood border-l-4 border-soosi-wood pl-2">ä¸€ã€å¥åº·èˆ‡éºå‚³é¢¨éšªå…è²¬</h5>
                                <div className="text-xs space-y-2">
                                    <p>è‹¥å› ä»¥ä¸‹å› ç´ å°è‡´å¯µç‰©ç–¾ç—…ç™¼ä½œã€æ„å¤–ä¼‘å…‹æˆ–æ­»äº¡ï¼Œ<span className="font-bold text-soosi-red">æ¦‚èˆ‡æœ¬å·¥ä½œå®¤ç„¡é—œ</span>ï¼š</p>
                                    <ul className="list-disc pl-5 text-gray-600">
                                        <li>åŸºå› æˆ–éºå‚³å•é¡Œã€‚</li>
                                        <li>å¤©ç”Ÿç—…å²ã€é«˜é½¡çŠ¬è²“æˆ–å¹¼çŠ¬è²“ã€‚</li>
                                        <li>é£¼ä¸»éš±çç—…æƒ…æˆ–å·²çŸ¥é¢¨éšªä»å …æŒä½å®¿ã€‚</li>
                                    </ul>
                                </div>
                            </div>

                            {/* äºŒã€ç·Šæ€¥é€é†«èˆ‡è²»ç”¨ */}
                            <div className="space-y-2">
                                <h5 className="font-black text-soosi-wood border-l-4 border-soosi-wood pl-2">äºŒã€ç·Šæ€¥é€é†«èˆ‡è²»ç”¨</h5>
                                <p className="text-xs">è‹¥ç™¼ç”Ÿä¸Šè¿°æ„å¤–ï¼Œå·¥ä½œå®¤å°‡ç«‹å³é€å¾€é™„è¿‘å‹•ç‰©é†«é™¢æ•‘æ²»ã€‚é€é†«é€”ä¸­æˆ–æ²»ç™‚æ‰€ç”¢ç”Ÿä¹‹æ‰€æœ‰è²»ç”¨ï¼Œçš†ç”±é£¼ä¸»å…¨é¡è² æ“”ã€‚</p>
                            </div>

                            {/* ä¸‰ã€å¤œé–“ç„¡äººèˆ‡æƒ…ç·’é¢¨éšª (å†æ¬¡å¼·èª¿) */}
                            <div className="bg-red-50 p-3 rounded-lg border border-red-100 space-y-2">
                                <h5 className="font-black text-soosi-red text-xs">â›” å¤œé–“èˆ‡æƒ…ç·’é¢¨éšªç‰¹åˆ¥è²æ˜</h5>
                                <ul className="list-disc pl-5 text-xs text-soosi-dark">
                                    <li>é£¼ä¸»å·²çŸ¥æœ¬å·¥ä½œå®¤<span className="font-bold">ç„¡ 24 å°æ™‚æœå‹™</span>ã€‚</li>
                                    <li>å¤œé–“ç„¡äººç…§è­·æ™‚ï¼Œè‹¥å› å¯µç‰©æœ¬èº«ç„¦æ…®ã€æƒ…ç·’ä¸ç©©å°è‡´è‡ªæ®˜æˆ–å—å‚·ï¼Œæˆ–å› æ€¥ç—…ç„¡æ³•å³æ™‚æ•‘æ²»ï¼Œ<span className="font-bold">èˆ‡æœ¬å·¥ä½œå®¤ç„¡é—œ</span>ã€‚</li>
                                </ul>
                            </div>

                            {/* å››ã€æ³•å¾‹æ•ˆåŠ› */}
                            <div className="text-xs text-gray-500 bg-gray-50 p-3 rounded-lg">
                                <span className="font-bold">æ³•å¾‹æ•ˆåŠ›ç¢ºèªï¼š</span>
                                å€˜è‹¥ç™¼ç”Ÿæ³•å¾‹ç³¾ç´›æˆ–è¨´è¨Ÿï¼Œæœ¬åˆ‡çµæ›¸å°‡ä½œç‚ºé›™æ–¹æ¬Šåˆ©ç¾©å‹™ä¹‹é‡è¦ä¾æ“šï¼Œä¸¦å‘ˆäº¤ç›¸é—œæ³•å¾‹éƒ¨é–€ä½è­‰ã€‚
                            </div>
                        </div>
                    </TermsModal>
                    {/* 6. ä½å®¿åƒ¹ç›®è¡¨ Modal (åœ–ç‰‡ç‰ˆ) */}
                    <BoardingPriceModal isOpen={activeModal === 'boardingPrice'} onClose={()=>setActiveModal(null)} />
                </div>
            );
        };

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
    <script>
        // Service Worker è‡ªå‹•æ›´æ–°è…³æœ¬
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    // 1. è¨»å†Š Service Worker (è«‹ç¢ºèªä½ çš„æª”æ¡ˆåç¨±æ˜¯ sw.js)
                    const registration = await navigator.serviceWorker.register('./sw.js');
                    console.log('Service Worker è¨»å†ŠæˆåŠŸ');

                    // 2. ç›£è½æ›´æ–°ï¼šç•¶åµæ¸¬åˆ° sw.js å…§å®¹æœ‰è®Šå‹•æ™‚
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            // ç•¶æ–°çš„ Service Worker å®‰è£å®Œæˆä¸”æº–å‚™å¥½æ¥ç®¡æ™‚
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                console.log('åµæ¸¬åˆ°æ–°ç‰ˆæœ¬ï¼Œæ­£åœ¨è‡ªå‹•æ›´æ–°é é¢...');
                                // å¼·åˆ¶é‡æ•´é é¢ï¼Œç¢ºä¿ä½¿ç”¨è€…çœ‹åˆ°çš„æ˜¯æœ€æ–°ç‰ˆ
                                window.location.reload();
                            }
                        });
                    });
                } catch (error) {
                    console.error('Service Worker è¨»å†Šå¤±æ•—:', error);
                }
            });
        }
    </script>
</body>
</html>
